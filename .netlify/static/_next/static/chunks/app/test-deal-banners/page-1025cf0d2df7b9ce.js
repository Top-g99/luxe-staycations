(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8542,8991],{11867:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>p});var n=t(95155),r=t(12115),i=t(80851),l=t(4474),s=t(97322),o=t(23315),c=t(78010),d=t(33077),u=t(29767),g=t(84578),h=t(9562),x=t(99944),A=t(9957),m=t(70690),b=t(28548),v=t(68991);function p(){let[e,a]=(0,r.useState)([]),[t,p]=(0,r.useState)(!0),[y,j]=(0,r.useState)("checking"),[w,f]=(0,r.useState)({title:"Ready to Find a Great Villa Deal?",subtitle:"Save up to 25% on your next luxury villa stay",buttonText:"Explore Deals",buttonLink:"/villas",videoUrl:"",fallbackImageUrl:"https://i.pinimg.com/736x/6d/a3/a3/6da3a3ded69f943f7d4df7b33e2d6086.jpg",isActive:!0,startDate:"",endDate:""});(0,r.useEffect)(()=>{k()},[]);let k=async()=>{p(!0);try{await v.dealBannerManager.initialize();let e=await v.dealBannerManager.getAll();a(e),j("connected")}catch(e){console.error("Error loading deal banners:",e),j("error")}finally{p(!1)}},B=async()=>{try{await v.dealBannerManager.create(w),await k(),alert("Test deal banner added successfully!")}catch(e){console.error("Error adding test deal banner:",e),alert("Error adding test deal banner")}},D=async()=>{if(window.confirm("Are you sure you want to clear all deal banners?"))try{await v.dealBannerManager.clear(),await k(),alert("All deal banners cleared!")}catch(e){console.error("Error clearing deal banners:",e),alert("Error clearing deal banners")}},S=async(e,a)=>{try{await v.dealBannerManager.update(e,{isActive:!a}),await k()}catch(e){console.error("Error toggling deal banner:",e)}};return t?(0,n.jsx)(i.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"50vh"},children:(0,n.jsx)(l.A,{})}):(0,n.jsxs)(s.A,{maxWidth:"lg",sx:{py:4},children:[(0,n.jsx)(o.A,{variant:"h3",gutterBottom:!0,children:"Deal Banners Test"}),(0,n.jsx)(c.A,{severity:(()=>{switch(y){case"connected":return"success";case"error":return"error";default:return"warning"}})(),sx:{mb:3},children:(()=>{switch(y){case"connected":return"Connected to Supabase";case"error":return"Error connecting to Supabase";default:return"Checking connection..."}})()}),(0,n.jsxs)(d.Ay,{container:!0,spacing:3,sx:{mb:4},children:[(0,n.jsx)(d.Ay,{item:!0,xs:12,md:6,children:(0,n.jsx)(u.A,{children:(0,n.jsxs)(g.A,{children:[(0,n.jsx)(o.A,{variant:"h6",gutterBottom:!0,children:"Add Test Deal Banner"}),(0,n.jsxs)(i.A,{sx:{display:"flex",flexDirection:"column",gap:2},children:[(0,n.jsx)(h.A,{label:"Title",value:w.title,onChange:e=>f({...w,title:e.target.value})}),(0,n.jsx)(h.A,{label:"Subtitle",multiline:!0,rows:2,value:w.subtitle,onChange:e=>f({...w,subtitle:e.target.value})}),(0,n.jsx)(h.A,{label:"Button Text",value:w.buttonText,onChange:e=>f({...w,buttonText:e.target.value})}),(0,n.jsx)(h.A,{label:"Button Link",value:w.buttonLink,onChange:e=>f({...w,buttonLink:e.target.value})}),(0,n.jsx)(h.A,{label:"Fallback Image URL",value:w.fallbackImageUrl,onChange:e=>f({...w,fallbackImageUrl:e.target.value})}),(0,n.jsx)(x.A,{control:(0,n.jsx)(A.A,{checked:w.isActive,onChange:e=>f({...w,isActive:e.target.checked})}),label:"Active"}),(0,n.jsx)(m.A,{variant:"contained",onClick:B,children:"Add Test Deal Banner"})]})]})})}),(0,n.jsx)(d.Ay,{item:!0,xs:12,md:6,children:(0,n.jsx)(u.A,{children:(0,n.jsxs)(g.A,{children:[(0,n.jsx)(o.A,{variant:"h6",gutterBottom:!0,children:"Actions"}),(0,n.jsxs)(i.A,{sx:{display:"flex",flexDirection:"column",gap:2},children:[(0,n.jsx)(m.A,{variant:"outlined",onClick:k,children:"Refresh Deal Banners"}),(0,n.jsx)(m.A,{variant:"outlined",color:"error",onClick:D,children:"Clear All Deal Banners"}),(0,n.jsx)(m.A,{variant:"outlined",onClick:()=>window.open("/admin/data-monitor","_blank"),children:"Open Data Monitor"}),(0,n.jsx)(m.A,{variant:"outlined",onClick:()=>window.open("/","_blank"),children:"View Home Page"})]})]})})})]}),(0,n.jsx)(u.A,{children:(0,n.jsxs)(g.A,{children:[(0,n.jsxs)(o.A,{variant:"h6",gutterBottom:!0,children:["Deal Banners (",e.length,")"]}),(0,n.jsx)(d.Ay,{container:!0,spacing:2,children:e.map(e=>(0,n.jsx)(d.Ay,{item:!0,xs:12,md:6,lg:4,children:(0,n.jsx)(u.A,{variant:"outlined",children:(0,n.jsxs)(g.A,{children:[(0,n.jsx)(o.A,{variant:"h6",gutterBottom:!0,children:e.title}),(0,n.jsx)(o.A,{variant:"body2",color:"textSecondary",gutterBottom:!0,children:e.subtitle}),(0,n.jsxs)(i.A,{sx:{mt:1},children:[(0,n.jsx)(b.A,{label:e.isActive?"Active":"Inactive",size:"small",color:e.isActive?"success":"default",sx:{mr:1}}),(0,n.jsx)(b.A,{label:e.buttonText,size:"small"})]}),(0,n.jsx)(i.A,{sx:{mt:2},children:(0,n.jsx)(m.A,{size:"small",onClick:()=>S(e.id,e.isActive),variant:"outlined",children:e.isActive?"Deactivate":"Activate"})}),(0,n.jsxs)(o.A,{variant:"caption",display:"block",sx:{mt:1},children:["ID: ",e.id]})]})})},e.id))}),0===e.length&&(0,n.jsx)(o.A,{color:"textSecondary",sx:{textAlign:"center",py:4},children:"No deal banners found. Add a test deal banner to see it here!"})]})})]})}},31145:(e,a,t)=>{Promise.resolve().then(t.bind(t,11867))},68991:(e,a,t)=>{"use strict";t.r(a),t.d(a,{DataManager:()=>l,bookingManager:()=>o,callbackManager:()=>A,couponManagerInstance:()=>m,dealBannerManager:()=>d,dealManager:()=>h,destinationManager:()=>u,heroBackgroundManager:()=>g,masterDataManager:()=>b,mockBookings:()=>r,mockProperties:()=>n,mockUsers:()=>i,offersBannerManager:()=>x,propertyManager:()=>s,userManager:()=>c});let n=[{id:"1",name:"Luxury Villa 1",description:"Beautiful luxury villa with ocean view",price:500,location:"Goa",type:"villa",amenities:["pool","wifi","ac"],images:["/images/villa1.jpg"],featured:!0,available:!0,max_guests:8,bedrooms:4,bathrooms:3,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}],r=[{id:"1",property_id:"1",user_id:"1",guestName:"John Doe",guestEmail:"john@example.com",guestPhone:"+1234567890",checkIn:"2024-01-01",checkOut:"2024-01-05",guests:4,totalAmount:2e3,status:"confirmed",created_at:new Date().toISOString(),updated_at:new Date().toISOString()}],i=[{id:"1",email:"user@example.com",name:"John Doe",phone:"+1234567890",created_at:new Date().toISOString(),updated_at:new Date().toISOString()}];class l{async initialize(){return Promise.resolve()}async getAll(){return this.data}async getById(e){return this.data.find(a=>a.id===e)||null}async create(e){return this.data.push(e),e}async update(e,a){let t=this.data.findIndex(a=>a.id===e);return -1!==t?(this.data[t]={...this.data[t],...a},this.data[t]):null}async delete(e){let a=this.data.findIndex(a=>a.id===e);return -1!==a&&(this.data.splice(a,1),!0)}async redeemCoupon(e,a,t,n,r){return console.log("Redeeming coupon:",{code:e,amount:a,bookingId:t,email:n,name:r}),{success:!0,discount:0}}async validateCoupon(e,a){return console.log("Validating coupon:",{code:e,amount:a}),{isValid:!0,discount:0,message:"Coupon is valid"}}async getFeatured(){return this.data.filter(e=>!0===e.featured)}async getActive(){return this.data.filter(e=>!0===e.isActive)}subscribe(e){return()=>{}}async initializeAll(){await this.getAll()}getStats(){return{total:this.data.length,loading:!1,initialized:!0}}async clear(){this.data=[]}constructor(e){this.data=[],this.tableName=e}}let s=new l("properties"),o=new l("bookings"),c=new l("users"),d=new l("dealBanners"),u=new l("destinations"),g=new l("heroBackgrounds"),h=new l("deals"),x=new l("offersBanners"),A=new l("callbacks"),m=new l("coupons"),b=new l("masterData")}},e=>{e.O(0,[5446,134,5493,5436,3077,7247,8548,8020,2403,9562,3568,822,8441,1255,7358],()=>e(e.s=31145)),_N_E=e.O()}]);