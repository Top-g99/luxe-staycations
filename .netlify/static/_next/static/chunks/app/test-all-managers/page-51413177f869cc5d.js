(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2890,7220],{8015:(e,t,n)=>{Promise.resolve().then(n.bind(n,67993))},16310:(e,t,n)=>{"use strict";n.d(t,{r:()=>s});class i{static getInstance(){return i.instance||(i.instance=new i),i.instance}async initialize(){return Promise.resolve()}async getAll(){return this.properties}async getById(e){return this.properties.find(t=>t.id===e)||null}async create(e){let t={...e,id:Date.now().toString(),created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return this.properties.push(t),t}async update(e,t){let n=this.properties.findIndex(t=>t.id===e);return -1!==n?(this.properties[n]={...this.properties[n],...t,updated_at:new Date().toISOString()},this.properties[n]):null}async delete(e){let t=this.properties.findIndex(t=>t.id===e);return -1!==t&&(this.properties.splice(t,1),!0)}getProperties(){return this.properties}isLoading(){return!1}isInitialized(){return!0}async addProperty(e){let t={...e,id:Date.now().toString(),created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return this.properties.push(t),t}constructor(){this.properties=[]}}let s=i.getInstance()},62890:(e,t,n)=>{"use strict";n.d(t,{TABLES:()=>o,Wt:()=>r,getSupabaseClient:()=>a});class i{static getInstance(){return i.instance||(i.instance=new i),i.instance}async initialize(){return Promise.resolve()}getClient(){return this.client}from(e){let t={select:e=>t,insert:e=>t,update:e=>t,delete:()=>t,eq:(e,n)=>t,in:(e,n)=>t,gte:(e,n)=>t,lte:(e,n)=>t,order:(e,n)=>t,limit:e=>t,then:e=>e({data:[],error:null})};return t}async auth(){return{getUser:()=>Promise.resolve({data:{user:null},error:null}),signIn:()=>Promise.resolve({data:{user:null},error:null}),signOut:()=>Promise.resolve({error:null})}}async rpc(e,t){return Promise.resolve({data:null,error:null})}constructor(){this.client=null}}let s=i.getInstance(),a=()=>s.getClient(),r=()=>!0,o={PROPERTIES:"properties",BOOKINGS:"bookings",USERS:"users",DESTINATIONS:"destinations",DEAL_BANNERS:"deal_banners",HERO_BACKGROUNDS:"hero_backgrounds",CALLBACKS:"callbacks",CONTACTS:"contacts",CONSULTATIONS:"consultations",PARTNERS:"partners",PAYMENTS:"payments",LOYALTY_RULES:"loyalty_rules",LOYALTY_REDEMPTIONS:"loyalty_redemptions",EMAIL_TEMPLATES:"email_templates",EMAIL_TRIGGERS:"email_triggers",EMAIL_CONFIGURATIONS:"email_configurations",EMAIL_LOGS:"email_logs",WHATSAPP_MESSAGES:"whatsapp_messages",INSTAGRAM_POSTS:"instagram_posts"}},67993:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>T});var i=n(95155),s=n(12115),a=n(80851),r=n(97322),o=n(23315),l=n(29767),c=n(84578),d=n(4474),u=n(78010),h=n(70690),g=n(33077),p=n(28548),x=n(55369),A=n(26466),b=n(98267),m=n(20537),S=n(37960),j=n(63186),k=n(16310);class I{static getInstance(){return I.instance||(I.instance=new I),I.instance}async initialize(){return Promise.resolve()}async getAll(){return this.destinations}async getById(e){return this.destinations.find(t=>t.id===e)||null}async create(e){let t={...e,id:Date.now().toString(),created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return this.destinations.push(t),t}async update(e,t){let n=this.destinations.findIndex(t=>t.id===e);return -1!==n?(this.destinations[n]={...this.destinations[n],...t,updated_at:new Date().toISOString()},this.destinations[n]):null}async delete(e){let t=this.destinations.findIndex(t=>t.id===e);return -1!==t&&(this.destinations.splice(t,1),!0)}getAllDestinations(){return this.destinations}isLoading(){return!1}isInitialized(){return!0}async addDestination(e){let t={...e,id:Date.now().toString(),created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return this.destinations.push(t),t}constructor(){this.destinations=[]}}let y=I.getInstance();class w{static getInstance(){return w.instance||(w.instance=new w),w.instance}async initialize(){return Promise.resolve()}async getAll(){return this.bookings}async getById(e){return this.bookings.find(t=>t.id===e)||null}async create(e){let t={...e,id:Date.now().toString(),created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return this.bookings.push(t),t}async update(e,t){let n=this.bookings.findIndex(t=>t.id===e);return -1!==n?(this.bookings[n]={...this.bookings[n],...t,updated_at:new Date().toISOString()},this.bookings[n]):null}async delete(e){let t=this.bookings.findIndex(t=>t.id===e);return -1!==t&&(this.bookings.splice(t,1),!0)}get initialized(){return!0}async getAnalytics(){return{totalBookings:this.bookings.length,totalRevenue:this.bookings.reduce((e,t)=>e+t.total_amount,0),averageBookingValue:this.bookings.length>0?this.bookings.reduce((e,t)=>e+t.total_amount,0)/this.bookings.length:0}}async getAllBookings(){return this.bookings}async createBooking(e){let t={id:Date.now().toString(),property_id:e.propertyId||"",user_id:e.userId||"",check_in:e.checkIn||"",check_out:e.checkOut||"",guests:e.guests||1,total_amount:e.totalAmount||0,status:"pending",created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return this.bookings.push(t),t}async updateBooking(e,t){let n=this.bookings.findIndex(t=>t.id===e);return -1!==n?(this.bookings[n]={...this.bookings[n],...t,updated_at:new Date().toISOString()},this.bookings[n]):null}async deleteBooking(e){let t=this.bookings.findIndex(t=>t.id===e);return -1!==t&&(this.bookings.splice(t,1),!0)}constructor(){this.bookings=[]}}let f=w.getInstance();class _{static getInstance(){return _.instance||(_.instance=new _),_.instance}async initialize(){return Promise.resolve()}async getAll(){return this.callbacks}async getById(e){return this.callbacks.find(t=>t.id===e)||null}async create(e){let t={...e,id:Date.now().toString(),created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return this.callbacks.push(t),t}async update(e,t){let n=this.callbacks.findIndex(t=>t.id===e);return -1!==n?(this.callbacks[n]={...this.callbacks[n],...t,updated_at:new Date().toISOString()},this.callbacks[n]):null}async delete(e){let t=this.callbacks.findIndex(t=>t.id===e);return -1!==t&&(this.callbacks.splice(t,1),!0)}getAllCallbacks(){return this.callbacks}isLoading(){return!1}isInitialized(){return!0}async submitCallback(e){let t={...e,id:Date.now().toString(),created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return this.callbacks.push(t),t}constructor(){this.callbacks=[]}}let v=_.getInstance();class D{static getInstance(){return D.instance||(D.instance=new D),D.instance}async initialize(){return Promise.resolve()}async getAll(){return this.banners}async getById(e){return this.banners.find(t=>t.id===e)||null}async create(e){let t={...e,id:Date.now().toString(),created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return this.banners.push(t),t}async update(e,t){let n=this.banners.findIndex(t=>t.id===e);return -1!==n?(this.banners[n]={...this.banners[n],...t,updated_at:new Date().toISOString()},this.banners[n]):null}async delete(e){let t=this.banners.findIndex(t=>t.id===e);return -1!==t&&(this.banners.splice(t,1),!0)}getAllBanners(){return this.banners}isLoading(){return!1}isInitialized(){return!0}async addBanner(e){let t={...e,id:Date.now().toString(),created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return this.banners.push(t),t}constructor(){this.banners=[]}}let O=D.getInstance();var C=n(62890);function z(e){let{children:t,value:n,index:s,...r}=e;return(0,i.jsx)("div",{role:"tabpanel",hidden:n!==s,id:"manager-tabpanel-".concat(s),"aria-labelledby":"manager-tab-".concat(s),...r,children:n===s&&(0,i.jsx)(a.A,{sx:{p:3},children:t})})}function T(){let[e,t]=(0,s.useState)("checking"),[n,I]=(0,s.useState)(!1),[w,_]=(0,s.useState)(""),[D,T]=(0,s.useState)(0),[E,B]=(0,s.useState)({properties:{data:[],loading:!1,initialized:!1},destinations:{data:[],loading:!1,initialized:!1},bookings:{data:[],loading:!1,initialized:!1},callbacks:{data:[],loading:!1,initialized:!1},banners:{data:[],loading:!1,initialized:!1}});(0,s.useEffect)(()=>{P()},[]);let P=async()=>{I(!0),_("");try{if(!(0,C.Wt)()){t("not-configured"),_("Supabase is not configured. Please check your .env.local file.");return}let e=(0,C.getSupabaseClient)();if(!e)throw Error("Supabase client not available");let{data:n,error:i}=await e.from("properties").select("count").limit(1);i?(t("error"),_("Connection error: ".concat(i.message))):(t("connected"),_("✅ Supabase connection successful!"),await L())}catch(e){t("error"),_("Error: ".concat(e instanceof Error?e.message:"Unknown error"))}finally{I(!1)}},L=async()=>{try{await Promise.all([k.r.initialize(),y.initialize(),f.initialize(),v.initialize(),O.initialize()]),B({properties:{data:k.r.getProperties(),loading:k.r.isLoading(),initialized:k.r.isInitialized()},destinations:{data:y.getAllDestinations(),loading:y.isLoading(),initialized:y.isInitialized()},bookings:{data:[],loading:!1,initialized:f.initialized},callbacks:{data:v.getAllCallbacks(),loading:v.isLoading(),initialized:v.isInitialized()},banners:{data:O.getAllBanners(),loading:O.isLoading(),initialized:O.isInitialized()}}),_("✅ All managers initialized successfully!")}catch(e){_("Error initializing managers: ".concat(e instanceof Error?e.message:"Unknown error"))}},N=async()=>{I(!0);try{let e=await k.r.addProperty({name:"Test Property ".concat(Date.now()),location:"Test Location",description:"This is a test property",images:["https://images.unsplash.com/photo-1564013799919-ab600027ffc6?w=800&q=80"],price:15e3,type:"Test Villa",amenities:["WiFi","Kitchen","Parking"],featured:!1,bedrooms:3,bathrooms:2,max_guests:6,available:!0});await y.addDestination({name:"Test Destination ".concat(Date.now()),location:"Test Location",description:"This is a test destination",image:"https://images.unsplash.com/photo-1564013799919-ab600027ffc6?w=800&q=80",featured:!1}),await f.createBooking({propertyId:e.id,guestName:"Test Guest",guestEmail:"test@example.com",guestPhone:"+1234567890",propertyName:e.name,checkIn:"2024-12-01",checkOut:"2024-12-03",guests:2,amount:3e4,status:"pending",paymentStatus:"pending",specialRequests:"Test special request"}),await v.submitCallback({name:"Test User",email:"test@example.com",phone:"+1234567890",message:"This is a test callback request",status:"pending"}),await O.addBanner({title:"Test Banner ".concat(Date.now()),description:"Test banner description",image:"https://images.unsplash.com/photo-1564013799919-ab600027ffc6?w=1200&q=80",link:"/test",isActive:!0}),_("✅ Test data added to all managers!"),await L()}catch(e){_("Error adding test data: ".concat(e instanceof Error?e.message:"Unknown error"))}finally{I(!1)}},R=async()=>{I(!0);try{let e=(0,C.getSupabaseClient)();e&&await Promise.all([e.from("properties").delete().neq("id","00000000-0000-0000-0000-000000000000"),e.from("destinations").delete().neq("id","00000000-0000-0000-0000-000000000000"),e.from("bookings").delete().neq("id","00000000-0000-0000-0000-000000000000"),e.from("callback_requests").delete().neq("id","00000000-0000-0000-0000-000000000000"),e.from("deal_banners").delete().neq("id","00000000-0000-0000-0000-000000000000")]),_("✅ All data cleared!"),await L()}catch(e){_("Error clearing data: ".concat(e instanceof Error?e.message:"Unknown error"))}finally{I(!1)}};return(0,i.jsxs)(r.A,{maxWidth:"lg",sx:{py:4},children:[(0,i.jsx)(o.A,{variant:"h3",component:"h1",gutterBottom:!0,align:"center",sx:{color:"#704F49"},children:"All Supabase Managers Test"}),(0,i.jsx)(a.A,{sx:{mb:4},children:(0,i.jsx)(l.A,{children:(0,i.jsxs)(c.A,{children:[(0,i.jsx)(o.A,{variant:"h6",gutterBottom:!0,children:"Connection Status"}),(0,i.jsxs)(a.A,{sx:{display:"flex",alignItems:"center",gap:2,mb:2},children:[n?(0,i.jsx)(d.A,{size:20}):(0,i.jsx)(a.A,{sx:{width:12,height:12,borderRadius:"50%",backgroundColor:"connected"===e?"#4caf50":"error"===e?"#f44336":"#ff9800"}}),(0,i.jsxs)(o.A,{variant:"body1",children:["checking"===e&&"Checking connection...","connected"===e&&"Connected to Supabase","error"===e&&"Connection failed","not-configured"===e&&"Not configured"]})]}),w&&(0,i.jsx)(u.A,{severity:(()=>{switch(e){case"connected":return"success";case"error":return"error";case"not-configured":return"warning";default:return"info"}})(),sx:{mb:2},children:w}),(0,i.jsxs)(a.A,{sx:{display:"flex",gap:2,flexWrap:"wrap"},children:[(0,i.jsx)(h.A,{variant:"contained",onClick:P,disabled:n,sx:{bgcolor:"#704F49","&:hover":{bgcolor:"#5A3F3A"}},children:"Test Connection"}),(0,i.jsx)(h.A,{variant:"outlined",onClick:N,disabled:n||"connected"!==e,sx:{borderColor:"#704F49",color:"#704F49","&:hover":{borderColor:"#5A3F3A"}},children:"Add Test Data"}),(0,i.jsx)(h.A,{variant:"outlined",color:"error",onClick:R,disabled:n||"connected"!==e,children:"Clear All Data"})]})]})})}),"connected"===e&&(0,i.jsxs)(a.A,{children:[(0,i.jsx)(o.A,{variant:"h6",gutterBottom:!0,children:"Manager Status"}),(0,i.jsx)(g.Ay,{container:!0,spacing:2,sx:{mb:3},children:Object.entries(E).map(e=>{let[t,n]=e;return(0,i.jsx)(g.Ay,{item:!0,xs:12,sm:6,md:4,children:(0,i.jsx)(l.A,{children:(0,i.jsxs)(c.A,{children:[(0,i.jsx)(o.A,{variant:"h6",sx:{textTransform:"capitalize"},children:t}),(0,i.jsxs)(o.A,{variant:"body2",color:"text.secondary",children:["Data: ",n.data.length," items"]}),(0,i.jsxs)(a.A,{sx:{mt:1},children:[(0,i.jsx)(p.A,{label:n.initialized?"Initialized":"Not Initialized",size:"small",color:n.initialized?"success":"warning",sx:{mr:1}}),n.loading&&(0,i.jsx)(d.A,{size:16})]})]})})},t)})}),(0,i.jsx)(a.A,{sx:{borderBottom:1,borderColor:"divider"},children:(0,i.jsxs)(x.A,{value:D,onChange:(e,t)=>{T(t)},"aria-label":"manager tabs",children:[(0,i.jsx)(A.A,{label:"Properties"}),(0,i.jsx)(A.A,{label:"Destinations"}),(0,i.jsx)(A.A,{label:"Bookings"}),(0,i.jsx)(A.A,{label:"Callbacks"}),(0,i.jsx)(A.A,{label:"Banners"})]})}),(0,i.jsxs)(z,{value:D,index:0,children:[(0,i.jsxs)(o.A,{variant:"h6",gutterBottom:!0,children:["Properties (",E.properties.data.length,")"]}),E.properties.data.map(e=>{var t;return(0,i.jsxs)(b.A,{children:[(0,i.jsx)(m.A,{expandIcon:(0,i.jsx)(j.A,{}),children:(0,i.jsx)(o.A,{children:e.name})}),(0,i.jsxs)(S.A,{children:[(0,i.jsxs)(o.A,{children:[(0,i.jsx)("strong",{children:"Location:"})," ",e.location]}),(0,i.jsxs)(o.A,{children:[(0,i.jsx)("strong",{children:"Price:"})," ₹",null==(t=e.price)?void 0:t.toLocaleString()]}),(0,i.jsxs)(o.A,{children:[(0,i.jsx)("strong",{children:"Type:"})," ",e.type]}),(0,i.jsxs)(o.A,{children:[(0,i.jsx)("strong",{children:"Rating:"})," ",e.rating]})]})]},e.id)})]}),(0,i.jsxs)(z,{value:D,index:1,children:[(0,i.jsxs)(o.A,{variant:"h6",gutterBottom:!0,children:["Destinations (",E.destinations.data.length,")"]}),E.destinations.data.map(e=>{var t;return(0,i.jsxs)(b.A,{children:[(0,i.jsx)(m.A,{expandIcon:(0,i.jsx)(j.A,{}),children:(0,i.jsx)(o.A,{children:e.name})}),(0,i.jsxs)(S.A,{children:[(0,i.jsxs)(o.A,{children:[(0,i.jsx)("strong",{children:"Location:"})," ",e.location]}),(0,i.jsxs)(o.A,{children:[(0,i.jsx)("strong",{children:"Rating:"})," ",e.rating]}),(0,i.jsxs)(o.A,{children:[(0,i.jsx)("strong",{children:"Highlights:"})," ",null==(t=e.highlights)?void 0:t.join(", ")]})]})]},e.id)})]}),(0,i.jsxs)(z,{value:D,index:2,children:[(0,i.jsxs)(o.A,{variant:"h6",gutterBottom:!0,children:["Bookings (",E.bookings.data.length,")"]}),E.bookings.data.map(e=>{var t;return(0,i.jsxs)(b.A,{children:[(0,i.jsx)(m.A,{expandIcon:(0,i.jsx)(j.A,{}),children:(0,i.jsx)(o.A,{children:e.guest_name})}),(0,i.jsxs)(S.A,{children:[(0,i.jsxs)(o.A,{children:[(0,i.jsx)("strong",{children:"Email:"})," ",e.guest_email]}),(0,i.jsxs)(o.A,{children:[(0,i.jsx)("strong",{children:"Status:"})," ",e.status]}),(0,i.jsxs)(o.A,{children:[(0,i.jsx)("strong",{children:"Amount:"})," ₹",null==(t=e.total_amount)?void 0:t.toLocaleString()]}),(0,i.jsxs)(o.A,{children:[(0,i.jsx)("strong",{children:"Dates:"})," ",e.check_in_date," to ",e.check_out_date]})]})]},e.id)})]}),(0,i.jsxs)(z,{value:D,index:3,children:[(0,i.jsxs)(o.A,{variant:"h6",gutterBottom:!0,children:["Callbacks (",E.callbacks.data.length,")"]}),E.callbacks.data.map(e=>(0,i.jsxs)(b.A,{children:[(0,i.jsx)(m.A,{expandIcon:(0,i.jsx)(j.A,{}),children:(0,i.jsx)(o.A,{children:e.name})}),(0,i.jsxs)(S.A,{children:[(0,i.jsxs)(o.A,{children:[(0,i.jsx)("strong",{children:"Email:"})," ",e.email]}),(0,i.jsxs)(o.A,{children:[(0,i.jsx)("strong",{children:"Phone:"})," ",e.phone]}),(0,i.jsxs)(o.A,{children:[(0,i.jsx)("strong",{children:"Status:"})," ",e.status]}),(0,i.jsxs)(o.A,{children:[(0,i.jsx)("strong",{children:"Message:"})," ",e.message]})]})]},e.id))]}),(0,i.jsxs)(z,{value:D,index:4,children:[(0,i.jsxs)(o.A,{variant:"h6",gutterBottom:!0,children:["Banners (",E.banners.data.length,")"]}),E.banners.data.map(e=>(0,i.jsxs)(b.A,{children:[(0,i.jsx)(m.A,{expandIcon:(0,i.jsx)(j.A,{}),children:(0,i.jsx)(o.A,{children:e.title})}),(0,i.jsxs)(S.A,{children:[(0,i.jsxs)(o.A,{children:[(0,i.jsx)("strong",{children:"Subtitle:"})," ",e.subtitle]}),(0,i.jsxs)(o.A,{children:[(0,i.jsx)("strong",{children:"Active:"})," ",e.active?"Yes":"No"]}),(0,i.jsxs)(o.A,{children:[(0,i.jsx)("strong",{children:"Link:"})," ",e.link]})]})]},e.id))]})]})]})}},84578:(e,t,n)=>{"use strict";n.d(t,{A:()=>A});var i=n(88945),s=n(67810),a=n(12115),r=n(2821),o=n(57001),l=n(48116),c=n(16625),d=n(85795),u=n(95195);function h(e){return(0,u.Ay)("MuiCardContent",e)}(0,d.A)("MuiCardContent",["root"]);var g=n(95155);let p=["className","component"],x=(0,l.Ay)("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(e,t)=>t.root})(()=>({padding:16,"&:last-child":{paddingBottom:24}})),A=a.forwardRef(function(e,t){let n=(0,c.b)({props:e,name:"MuiCardContent"}),{className:a,component:l="div"}=n,d=(0,s.A)(n,p),u=(0,i.A)({},n,{component:l}),A=(e=>{let{classes:t}=e;return(0,o.A)({root:["root"]},h,t)})(u);return(0,g.jsx)(x,(0,i.A)({as:l,className:(0,r.A)(A.root,a),ownerState:u,ref:t},d))})}},e=>{e.O(0,[5446,134,5493,5436,3077,7247,8548,8020,2686,9853,5757,8441,1255,7358],()=>e(e.s=8015)),_N_E=e.O()}]);