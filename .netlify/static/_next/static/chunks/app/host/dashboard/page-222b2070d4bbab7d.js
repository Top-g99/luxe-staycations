(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5266],{44696:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>ei});var n=s(95155),r=s(12115),i=s(80851),o=s(97322),a=s(4474),l=s(33077),c=s(23315),d=s(70690),h=s(29767),x=s(84578),u=s(61259),g=s(55369),m=s(26466),j=s(28548),A=s(21067),p=s(1702),y=s(41983),v=s(41602),f=s(92025),b=s(49501),k=s(73741),S=s(17681),I=s(28121),w=s(48457),B=s(78784),P=s(74527),C=s(23123),D=s(75854),R=s(24821),E=s(56350),N=s(86946),W=s(61205),_=s(14915),O=s(42063),z=s(11665),q=s(47652),H=s(20063),T=s(52641),L=s(95436),F=s(88450),G=s(86973),M=s(99944),Y=s(9957),V=s(9562),J=s(48833),K=s(52363),U=s(65036),Q=s(78010),X=s(75912),Z=s(80422),$=s(31102);function ee(e){var t,o;let{hostId:a,properties:u}=e,[g,m]=(0,r.useState)({propertyId:"",guestName:"",guestEmail:"",guestPhone:"",checkIn:"",checkOut:"",guests:1,specialRequests:"",isSelfBooking:!1,totalAmount:0}),[j,p]=(0,r.useState)(null),[y,v]=(0,r.useState)(!1),[f,b]=(0,r.useState)({open:!1,message:"",severity:"success"});(0,r.useEffect)(()=>{g.propertyId&&u.length>0&&p(u.find(e=>e.id===g.propertyId)||null)},[g.propertyId,u]),(0,r.useEffect)(()=>{j&&g.checkIn&&g.checkOut&&k()},[j,g.checkIn,g.checkOut,g.guests]);let k=()=>{if(!j||!g.checkIn||!g.checkOut)return;let e=new Date(g.checkIn),t=Math.ceil((new Date(g.checkOut).getTime()-e.getTime())/864e5);if(t>0){var s;let e=((null==(s=j.pricing)?void 0:s.basePrice)||j.price||0)*t;m(t=>({...t,totalAmount:e}))}},S=(e,t)=>{m(s=>({...s,[e]:t}))},I=async()=>{try{let{getSupabaseClient:e}=await s.e(2890).then(s.bind(s,62890)),t=e();if(!t)throw Error("Supabase client not available");let{data:n,error:r}=await t.from("host_bookings").insert([{property_id:g.propertyId,guest_name:g.guestName,guest_email:g.guestEmail,guest_phone:g.guestPhone,check_in:g.checkIn,check_out:g.checkOut,guests:g.guests,total_amount:g.totalAmount,status:"confirmed",payment_status:"paid",booking_date:new Date().toISOString(),special_requests:g.specialRequests,is_self_booking:g.isSelfBooking}]).select("id").single();if(r){console.error("Error creating booking:",r),console.error("Error details:",{message:r.message,details:r.details,hint:r.hint,code:r.code}),b({open:!0,message:"Error creating booking: ".concat(r.message),severity:"error"});return}b({open:!0,message:"Booking created successfully!",severity:"success"}),v(!1),B(),window.location.reload()}catch(e){console.error("Error creating booking:",e),b({open:!0,message:"Error creating booking",severity:"error"})}},B=()=>{m({propertyId:"",guestName:"",guestEmail:"",guestPhone:"",checkIn:"",checkOut:"",guests:1,specialRequests:"",isSelfBooking:!1,totalAmount:0}),p(null)},P=()=>{if(!g.checkIn||!g.checkOut)return 0;let e=new Date(g.checkIn);return Math.ceil((new Date(g.checkOut).getTime()-e.getTime())/864e5)};return(0,n.jsxs)(i.A,{children:[(0,n.jsx)(c.A,{variant:"h6",gutterBottom:!0,children:"Create New Booking"}),(0,n.jsx)(h.A,{children:(0,n.jsx)(x.A,{children:(0,n.jsxs)(l.Ay,{container:!0,spacing:3,children:[(0,n.jsx)(l.Ay,{item:!0,xs:12,md:6,children:(0,n.jsxs)(T.A,{fullWidth:!0,children:[(0,n.jsx)(L.A,{children:"Select Property"}),(0,n.jsx)(F.A,{value:g.propertyId,onChange:e=>S("propertyId",e.target.value),label:"Select Property",children:u.map(e=>(0,n.jsx)(G.A,{value:e.id,children:(0,n.jsxs)(i.A,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,n.jsx)(w.A,{sx:{color:"primary.main"}}),e.name," - ",e.location]})},e.id))})]})}),(0,n.jsx)(l.Ay,{item:!0,xs:12,md:6,children:(0,n.jsx)(M.A,{control:(0,n.jsx)(Y.A,{checked:g.isSelfBooking,onChange:()=>{let e=!g.isSelfBooking;m(t=>({...t,isSelfBooking:e,guestName:e?"Self Booking":"",guestEmail:e?"self@host.com":"",guestPhone:e?"N/A":""}))}}),label:"Book for myself"})}),(0,n.jsx)(l.Ay,{item:!0,xs:12,md:4,children:(0,n.jsx)(V.A,{label:"Guest Name",value:g.guestName,onChange:e=>S("guestName",e.target.value),fullWidth:!0,required:!0,disabled:g.isSelfBooking})}),(0,n.jsx)(l.Ay,{item:!0,xs:12,md:4,children:(0,n.jsx)(V.A,{label:"Guest Email",type:"email",value:g.guestEmail,onChange:e=>S("guestEmail",e.target.value),fullWidth:!0,required:!0,disabled:g.isSelfBooking})}),(0,n.jsx)(l.Ay,{item:!0,xs:12,md:4,children:(0,n.jsx)(V.A,{label:"Guest Phone",value:g.guestPhone,onChange:e=>S("guestPhone",e.target.value),fullWidth:!0,disabled:g.isSelfBooking})}),(0,n.jsx)(l.Ay,{item:!0,xs:12,md:3,children:(0,n.jsx)(V.A,{label:"Check In",type:"date",value:g.checkIn,onChange:e=>S("checkIn",e.target.value),fullWidth:!0,required:!0,InputLabelProps:{shrink:!0}})}),(0,n.jsx)(l.Ay,{item:!0,xs:12,md:3,children:(0,n.jsx)(V.A,{label:"Check Out",type:"date",value:g.checkOut,onChange:e=>S("checkOut",e.target.value),fullWidth:!0,required:!0,InputLabelProps:{shrink:!0}})}),(0,n.jsx)(l.Ay,{item:!0,xs:12,md:3,children:(0,n.jsx)(V.A,{label:"Number of Guests",type:"number",value:g.guests,onChange:e=>S("guests",parseInt(e.target.value)),fullWidth:!0,required:!0,inputProps:{min:1,max:20}})}),(0,n.jsx)(l.Ay,{item:!0,xs:12,md:3,children:(0,n.jsx)(V.A,{label:"Special Requests",value:g.specialRequests,onChange:e=>S("specialRequests",e.target.value),fullWidth:!0,multiline:!0,rows:2})}),j&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(l.Ay,{item:!0,xs:12,children:[(0,n.jsx)(A.A,{sx:{my:2}}),(0,n.jsx)(c.A,{variant:"h6",gutterBottom:!0,children:"Property Details"})]}),(0,n.jsx)(l.Ay,{item:!0,xs:12,md:6,children:(0,n.jsx)(h.A,{variant:"outlined",children:(0,n.jsxs)(x.A,{children:[(0,n.jsx)(c.A,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:"Property Information"}),(0,n.jsxs)(c.A,{variant:"body2",children:[(0,n.jsx)("strong",{children:"Name:"})," ",j.name]}),(0,n.jsxs)(c.A,{variant:"body2",children:[(0,n.jsx)("strong",{children:"Location:"})," ",j.location]}),(0,n.jsxs)(c.A,{variant:"body2",children:[(0,n.jsx)("strong",{children:"Type:"})," ",j.type||"Villa"]}),(0,n.jsxs)(c.A,{variant:"body2",children:[(0,n.jsx)("strong",{children:"Max Guests:"})," ",j.maxGuests||j.max_guests]})]})})}),(0,n.jsx)(l.Ay,{item:!0,xs:12,md:6,children:(0,n.jsx)(h.A,{variant:"outlined",children:(0,n.jsxs)(x.A,{children:[(0,n.jsx)(c.A,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:"Pricing & Booking Summary"}),(0,n.jsxs)(c.A,{variant:"body2",children:[(0,n.jsx)("strong",{children:"Base Price:"})," ₹",null==(o=j.pricing)||null==(t=o.basePrice)?void 0:t.toLocaleString(),"/night"]}),(0,n.jsxs)(c.A,{variant:"body2",children:[(0,n.jsx)("strong",{children:"Nights:"})," ",P()]}),(0,n.jsxs)(c.A,{variant:"body2",children:[(0,n.jsx)("strong",{children:"Guests:"})," ",g.guests]}),(0,n.jsx)(A.A,{sx:{my:1}}),(0,n.jsx)(c.A,{variant:"h6",color:"primary.main",children:(0,n.jsxs)("strong",{children:["Total: ₹",g.totalAmount.toLocaleString()]})})]})})})]}),(0,n.jsx)(l.Ay,{item:!0,xs:12,children:(0,n.jsxs)(i.A,{sx:{display:"flex",justifyContent:"flex-end",gap:2},children:[(0,n.jsx)(d.A,{variant:"outlined",onClick:B,children:"Reset Form"}),(0,n.jsx)(d.A,{variant:"contained",startIcon:(0,n.jsx)($.A,{}),onClick:()=>{(g.propertyId?g.guestName&&g.guestEmail?g.checkIn&&g.checkOut?g.guests<1?(b({open:!0,message:"Please specify number of guests",severity:"error"}),1):new Date(g.checkIn)>=new Date(g.checkOut)&&(b({open:!0,message:"Check-out date must be after check-in date",severity:"error"}),1):(b({open:!0,message:"Please select check-in and check-out dates",severity:"error"}),1):(b({open:!0,message:"Please fill in guest details",severity:"error"}),1):(b({open:!0,message:"Please select a property",severity:"error"}),1))||v(!0)},disabled:!g.propertyId||!g.checkIn||!g.checkOut,children:"Create Booking"})]})})]})})}),(0,n.jsxs)(J.A,{open:y,onClose:()=>v(!1),maxWidth:"sm",fullWidth:!0,children:[(0,n.jsx)(K.A,{children:"Confirm Booking"}),(0,n.jsx)(U.A,{children:(0,n.jsxs)(i.A,{sx:{pt:2},children:[(0,n.jsx)(c.A,{variant:"h6",gutterBottom:!0,children:null==j?void 0:j.name}),(0,n.jsxs)(i.A,{sx:{mb:3},children:[(0,n.jsx)(c.A,{variant:"subtitle2",color:"text.secondary",children:"Guest Information"}),(0,n.jsxs)(c.A,{children:["Name: ",g.guestName]}),(0,n.jsxs)(c.A,{children:["Email: ",g.guestEmail]}),g.guestPhone&&(0,n.jsxs)(c.A,{children:["Phone: ",g.guestPhone]})]}),(0,n.jsxs)(i.A,{sx:{mb:3},children:[(0,n.jsx)(c.A,{variant:"subtitle2",color:"text.secondary",children:"Booking Details"}),(0,n.jsxs)(c.A,{children:["Check In: ",new Date(g.checkIn).toLocaleDateString()]}),(0,n.jsxs)(c.A,{children:["Check Out: ",new Date(g.checkOut).toLocaleDateString()]}),(0,n.jsxs)(c.A,{children:["Guests: ",g.guests]}),(0,n.jsxs)(c.A,{children:["Nights: ",P()]}),(0,n.jsxs)(c.A,{variant:"h6",color:"primary.main",sx:{mt:1},children:["Total: ₹",g.totalAmount.toLocaleString()]})]}),g.specialRequests&&(0,n.jsxs)(i.A,{sx:{mb:3},children:[(0,n.jsx)(c.A,{variant:"subtitle2",color:"text.secondary",children:"Special Requests"}),(0,n.jsx)(c.A,{children:g.specialRequests})]}),(0,n.jsx)(Q.A,{severity:"info",sx:{mt:2},children:"This booking will be automatically confirmed and marked as paid. It will appear in the admin owner bookings section."})]})}),(0,n.jsxs)(X.A,{children:[(0,n.jsx)(d.A,{onClick:()=>v(!1),children:"Cancel"}),(0,n.jsx)(d.A,{onClick:I,variant:"contained",children:"Confirm Booking"})]})]}),(0,n.jsx)(Z.A,{open:f.open,autoHideDuration:6e3,onClose:()=>b({...f,open:!1}),children:(0,n.jsx)(Q.A,{severity:f.severity,onClose:()=>b({...f,open:!1}),children:f.message})})]})}var et=s(57430),es=s(58147);function en(e){let{hostId:t}=e,[s,o]=(0,r.useState)([]),[l,d]=(0,r.useState)(!0);(0,r.useEffect)(()=>{h()},[t]);let h=async()=>{try{d(!0);let e=await es.u.getHostSelfBookings(t);o(e)}catch(e){console.error("Error loading self-bookings:",e)}finally{d(!1)}};return l?(0,n.jsx)(i.A,{sx:{display:"flex",justifyContent:"center",py:4},children:(0,n.jsx)(a.A,{})}):0===s.length?(0,n.jsxs)(i.A,{sx:{textAlign:"center",py:4},children:[(0,n.jsx)(D.A,{sx:{fontSize:60,color:"text.secondary",mb:2}}),(0,n.jsx)(c.A,{variant:"h6",color:"text.secondary",gutterBottom:!0,children:"No Bookings Yet"}),(0,n.jsx)(c.A,{variant:"body2",color:"text.secondary",children:"Create your first booking using the form above. All bookings will appear here and in the admin panel."})]}):(0,n.jsx)(v.A,{children:s.map((e,t)=>{let o;return(0,n.jsxs)(r.Fragment,{children:[(0,n.jsxs)(f.Ay,{alignItems:"flex-start",children:[(0,n.jsx)(b.A,{children:(0,n.jsx)(w.A,{sx:{color:"primary.main"}})}),(0,n.jsx)(S.A,{primary:(0,n.jsxs)(i.A,{sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[(0,n.jsx)(c.A,{variant:"subtitle1",fontWeight:"medium",children:e.guest_name}),(0,n.jsx)(j.A,{label:e.status,color:(e=>{switch(e){case"confirmed":return"success";case"pending":return"warning";case"cancelled":return"error";case"completed":return"info";default:return"default"}})(e.status),size:"small"}),(0,n.jsx)(j.A,{label:e.paymentStatus||"Pending",color:(e=>{switch(e){case"paid":return"success";case"pending":return"warning";case"failed":return"error";case"refunded":return"info";default:return"default"}})(e.paymentStatus||"Pending"),size:"small",variant:"outlined"})]}),secondary:(0,n.jsxs)(i.A,{children:[(0,n.jsxs)(i.A,{sx:{display:"flex",alignItems:"center",gap:2,mb:1},children:[(0,n.jsxs)(i.A,{sx:{display:"flex",alignItems:"center",gap:.5},children:[(0,n.jsx)(D.A,{sx:{fontSize:16,color:"text.secondary"}}),(0,n.jsxs)(c.A,{variant:"body2",color:"text.secondary",children:[new Date(e.check_in).toLocaleDateString()," - ",new Date(e.check_out).toLocaleDateString()]})]}),(0,n.jsxs)(i.A,{sx:{display:"flex",alignItems:"center",gap:.5},children:[(0,n.jsx)(et.A,{sx:{fontSize:16,color:"text.secondary"}}),(0,n.jsxs)(c.A,{variant:"body2",color:"text.secondary",children:[e.guests," guest",e.guests>1?"s":""]})]})]}),(0,n.jsxs)(i.A,{sx:{display:"flex",alignItems:"center",gap:2},children:[(0,n.jsxs)(i.A,{sx:{display:"flex",alignItems:"center",gap:.5},children:[(0,n.jsx)(C.A,{sx:{fontSize:16,color:"text.secondary"}}),(0,n.jsx)(c.A,{variant:"body2",fontWeight:"medium",color:"primary.main",children:(o=e.total_amount,new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0}).format(o))})]}),e.specialRequests&&(0,n.jsxs)(c.A,{variant:"body2",color:"text.secondary",children:["Special: ",e.specialRequests]})]}),(0,n.jsxs)(c.A,{variant:"caption",color:"text.secondary",sx:{mt:1,display:"block"},children:["Booked on: ",new Date(e.created_at).toLocaleDateString()]})]})})]}),t<s.length-1&&(0,n.jsx)(A.A,{variant:"inset",component:"li"})]},e.id)})})}function er(e){let{children:t,value:s,index:r,...o}=e;return(0,n.jsx)("div",{role:"tabpanel",hidden:s!==r,id:"host-tabpanel-".concat(r),"aria-labelledby":"host-tab-".concat(r),...o,children:s===r&&(0,n.jsx)(i.A,{sx:{py:3},children:t})})}function ei(){var e,t,s;let{host:T,logout:L,isLoading:F}=(0,q.K)(),G=(0,H.useRouter)(),[M,Y]=(0,r.useState)(0);if((0,r.useEffect)(()=>{F||T||G.push("/host/login")},[T,F,G]),F)return(0,n.jsx)(o.A,{maxWidth:"xl",sx:{py:3},children:(0,n.jsx)(i.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"400px"},children:(0,n.jsx)(a.A,{size:60})})});if(!T)return null;let V=e=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0}).format(e);return(0,n.jsxs)(o.A,{maxWidth:"xl",sx:{py:3},children:[(0,n.jsx)(i.A,{sx:{mb:4},children:(0,n.jsxs)(l.Ay,{container:!0,alignItems:"center",justifyContent:"space-between",children:[(0,n.jsxs)(l.Ay,{item:!0,children:[(0,n.jsxs)(c.A,{variant:"h4",component:"h1",sx:{color:"primary.main",fontWeight:"bold"},children:["Welcome back, ",T.name,"! \uD83D\uDC4B"]}),(0,n.jsx)(c.A,{variant:"body1",color:"text.secondary",children:"Manage your properties and track your success"})]}),(0,n.jsx)(l.Ay,{item:!0,children:(0,n.jsx)(d.A,{variant:"outlined",startIcon:(0,n.jsx)(I.A,{}),onClick:()=>void(L(),G.push("/host/login")),sx:{borderRadius:2},children:"Logout"})})]})}),(0,n.jsxs)(l.Ay,{container:!0,spacing:3,sx:{mb:4},children:[(0,n.jsx)(l.Ay,{item:!0,xs:12,sm:6,md:3,children:(0,n.jsx)(h.A,{sx:{height:"100%",background:"linear-gradient(135deg, #3E2723 0%, #5D4037 100%)",color:"white"},children:(0,n.jsx)(x.A,{children:(0,n.jsxs)(i.A,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,n.jsxs)(i.A,{children:[(0,n.jsx)(c.A,{variant:"h4",component:"div",sx:{fontWeight:"bold"},children:T.totalProperties}),(0,n.jsx)(c.A,{variant:"body2",sx:{opacity:.9},children:"Total Properties"})]}),(0,n.jsx)(w.A,{sx:{fontSize:40,opacity:.8}})]})})})}),(0,n.jsx)(l.Ay,{item:!0,xs:12,sm:6,md:3,children:(0,n.jsx)(h.A,{sx:{height:"100%",background:"linear-gradient(135deg, #2E7D32 0%, #388E3C 100%)",color:"white"},children:(0,n.jsx)(x.A,{children:(0,n.jsxs)(i.A,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,n.jsxs)(i.A,{children:[(0,n.jsx)(c.A,{variant:"h4",component:"div",sx:{fontWeight:"bold"},children:T.properties.reduce((e,t)=>e+(t.totalBookings||0),0)}),(0,n.jsx)(c.A,{variant:"body2",sx:{opacity:.9},children:"Total Bookings"})]}),(0,n.jsx)(B.A,{sx:{fontSize:40,opacity:.8}})]})})})}),(0,n.jsx)(l.Ay,{item:!0,xs:12,sm:6,md:3,children:(0,n.jsx)(h.A,{sx:{height:"100%",background:"linear-gradient(135deg, #1976D2 0%, #2196F3 100%)",color:"white"},children:(0,n.jsx)(x.A,{children:(0,n.jsxs)(i.A,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,n.jsxs)(i.A,{children:[(0,n.jsx)(c.A,{variant:"h4",component:"div",sx:{fontWeight:"bold"},children:V(T.totalRevenue)}),(0,n.jsx)(c.A,{variant:"body2",sx:{opacity:.9},children:"Total Revenue"})]}),(0,n.jsx)(P.A,{sx:{fontSize:40,opacity:.8}})]})})})}),(0,n.jsx)(l.Ay,{item:!0,xs:12,sm:6,md:3,children:(0,n.jsx)(h.A,{sx:{height:"100%",background:"linear-gradient(135deg, #FF9800 0%, #FFB74D 100%)",color:"white"},children:(0,n.jsx)(x.A,{children:(0,n.jsxs)(i.A,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,n.jsxs)(i.A,{children:[(0,n.jsx)(c.A,{variant:"h4",component:"div",sx:{fontWeight:"bold"},children:"verified"===(T.verificationStatus||"pending")?"✓":"⏳"}),(0,n.jsx)(c.A,{variant:"body2",sx:{opacity:.9},children:"verified"===(T.verificationStatus||"pending")?"Verified":"Pending"})]}),(0,n.jsx)(C.A,{sx:{fontSize:40,opacity:.8}})]})})})})]}),(0,n.jsx)(u.A,{sx:{width:"100%",mb:3},children:(0,n.jsxs)(g.A,{value:M,onChange:(e,t)=>{Y(t)},"aria-label":"host dashboard tabs",children:[(0,n.jsx)(m.A,{label:"Properties",icon:(0,n.jsx)(w.A,{})}),(0,n.jsx)(m.A,{label:"Bookings",icon:(0,n.jsx)(D.A,{})}),(0,n.jsx)(m.A,{label:"Analytics",icon:(0,n.jsx)(R.A,{})}),(0,n.jsx)(m.A,{label:"Settings",icon:(0,n.jsx)(E.A,{})})]})}),(0,n.jsxs)(er,{value:M,index:0,children:[(0,n.jsxs)(i.A,{sx:{mb:3,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,n.jsx)(c.A,{variant:"h5",component:"h2",sx:{fontWeight:"bold"},children:"Your Properties"}),(0,n.jsx)(d.A,{variant:"contained",startIcon:(0,n.jsx)(N.A,{}),sx:{borderRadius:2},onClick:()=>G.push("/partner-with-us"),children:"Add New Property"})]}),(0,n.jsx)(l.Ay,{container:!0,spacing:3,children:T.properties.map(e=>{var t;return(0,n.jsx)(l.Ay,{item:!0,xs:12,md:6,children:(0,n.jsxs)(h.A,{sx:{height:"100%",position:"relative"},children:[(0,n.jsxs)(x.A,{children:[(0,n.jsxs)(i.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:2},children:[(0,n.jsxs)(i.A,{children:[(0,n.jsx)(c.A,{variant:"h6",component:"h3",sx:{fontWeight:"bold",mb:1},children:e.name}),(0,n.jsxs)(i.A,{sx:{display:"flex",alignItems:"center",mb:1},children:[(0,n.jsx)(W.A,{sx:{fontSize:16,color:"text.secondary",mr:.5}}),(0,n.jsx)(c.A,{variant:"body2",color:"text.secondary",children:e.location})]})]}),(0,n.jsx)(j.A,{label:e.status||"Active",color:(e=>{switch(e){case"active":return"success";case"inactive":return"error";case"pending":return"warning";default:return"default"}})(e.status||"Active"),size:"small"})]}),(0,n.jsxs)(i.A,{sx:{mb:2},children:[(0,n.jsxs)(c.A,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:["Property Type: ",e.type]}),(0,n.jsxs)(c.A,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:["Base Price: ",V((null==(t=e.pricing)?void 0:t.basePrice)||e.price),"/night"]})]}),(0,n.jsx)(A.A,{sx:{my:2}}),(0,n.jsxs)(l.Ay,{container:!0,spacing:2,sx:{mb:2},children:[(0,n.jsx)(l.Ay,{item:!0,xs:6,children:(0,n.jsxs)(i.A,{sx:{textAlign:"center"},children:[(0,n.jsx)(c.A,{variant:"h6",sx:{fontWeight:"bold",color:"primary.main"},children:e.totalBookings}),(0,n.jsx)(c.A,{variant:"caption",color:"text.secondary",children:"Total Bookings"})]})}),(0,n.jsx)(l.Ay,{item:!0,xs:6,children:(0,n.jsxs)(i.A,{sx:{textAlign:"center"},children:[(0,n.jsx)(c.A,{variant:"h6",sx:{fontWeight:"bold",color:"success.main"},children:V(e.totalRevenue||0)}),(0,n.jsx)(c.A,{variant:"caption",color:"text.secondary",children:"Total Revenue"})]})})]}),(0,n.jsxs)(i.A,{sx:{mb:2},children:[(0,n.jsx)(c.A,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Amenities:"}),(0,n.jsxs)(i.A,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:[e.amenities.slice(0,3).map((e,t)=>(0,n.jsx)(j.A,{label:e,size:"small",variant:"outlined",sx:{fontSize:"0.75rem"}},t)),e.amenities.length>3&&(0,n.jsx)(j.A,{label:"+".concat(e.amenities.length-3," more"),size:"small",variant:"outlined",sx:{fontSize:"0.75rem"}})]})]})]}),(0,n.jsxs)(p.A,{sx:{justifyContent:"space-between",px:2,pb:2},children:[(0,n.jsx)(d.A,{size:"small",startIcon:(0,n.jsx)(_.A,{}),onClick:()=>G.push("/host/properties/".concat(e.id,"/edit")),children:"Edit"}),(0,n.jsx)(d.A,{size:"small",startIcon:(0,n.jsx)(O.A,{}),onClick:()=>G.push("/host/properties/".concat(e.id)),children:"View Details"}),(0,n.jsx)(y.A,{size:"small",children:(0,n.jsx)(z.A,{})})]})]})},e.id)})})]}),(0,n.jsxs)(er,{value:M,index:1,children:[(0,n.jsx)(c.A,{variant:"h5",component:"h2",sx:{fontWeight:"bold",mb:3},children:"Your Property Bookings"}),(0,n.jsx)(i.A,{sx:{mb:4},children:(0,n.jsx)(ee,{hostId:T.id,properties:T.properties})}),(0,n.jsx)(h.A,{children:(0,n.jsxs)(x.A,{children:[(0,n.jsx)(c.A,{variant:"h6",gutterBottom:!0,children:"Your Recent Bookings"}),(0,n.jsx)(en,{hostId:T.id})]})})]}),(0,n.jsxs)(er,{value:M,index:2,children:[(0,n.jsx)(c.A,{variant:"h5",component:"h2",sx:{fontWeight:"bold",mb:3},children:"Performance Analytics"}),(0,n.jsxs)(l.Ay,{container:!0,spacing:3,children:[(0,n.jsx)(l.Ay,{item:!0,xs:12,md:8,children:(0,n.jsx)(h.A,{children:(0,n.jsxs)(x.A,{children:[(0,n.jsx)(c.A,{variant:"h6",gutterBottom:!0,children:"Revenue Overview"}),(0,n.jsx)(i.A,{sx:{height:200,display:"flex",alignItems:"center",justifyContent:"center"},children:(0,n.jsx)(c.A,{variant:"body2",color:"text.secondary",children:"\uD83D\uDCCA Revenue charts and analytics will be displayed here"})})]})})}),(0,n.jsx)(l.Ay,{item:!0,xs:12,md:4,children:(0,n.jsx)(h.A,{children:(0,n.jsxs)(x.A,{children:[(0,n.jsx)(c.A,{variant:"h6",gutterBottom:!0,children:"Top Performing Properties"}),(0,n.jsx)(v.A,{children:T.properties.sort((e,t)=>(t.totalRevenue||0)-(e.totalRevenue||0)).slice(0,3).map((e,t)=>(0,n.jsxs)(f.Ay,{sx:{px:0},children:[(0,n.jsx)(b.A,{children:(0,n.jsx)(k.A,{sx:{bgcolor:0===t?"gold":1===t?"silver":"bronze"},children:t+1})}),(0,n.jsx)(S.A,{primary:e.name,secondary:"".concat(V(e.totalRevenue||0)," • ").concat(e.totalBookings||0," bookings")})]},e.id))})]})})})]})]}),(0,n.jsxs)(er,{value:M,index:3,children:[(0,n.jsx)(c.A,{variant:"h5",component:"h2",sx:{fontWeight:"bold",mb:3},children:"Account Settings"}),(0,n.jsxs)(l.Ay,{container:!0,spacing:3,children:[(0,n.jsx)(l.Ay,{item:!0,xs:12,md:6,children:(0,n.jsx)(h.A,{children:(0,n.jsxs)(x.A,{children:[(0,n.jsx)(c.A,{variant:"h6",gutterBottom:!0,children:"Profile Information"}),(0,n.jsxs)(i.A,{sx:{mb:2},children:[(0,n.jsxs)(c.A,{variant:"body2",color:"text.secondary",children:["Name: ",T.name]}),(0,n.jsxs)(c.A,{variant:"body2",color:"text.secondary",children:["Email: ",T.email]}),(0,n.jsxs)(c.A,{variant:"body2",color:"text.secondary",children:["Phone: ",T.phone]}),(0,n.jsxs)(c.A,{variant:"body2",color:"text.secondary",children:["Member Since: ",T.memberSince.toLocaleDateString()]})]}),(0,n.jsx)(d.A,{variant:"outlined",size:"small",children:"Edit Profile"})]})})}),(0,n.jsx)(l.Ay,{item:!0,xs:12,md:6,children:(0,n.jsx)(h.A,{children:(0,n.jsxs)(x.A,{children:[(0,n.jsx)(c.A,{variant:"h6",gutterBottom:!0,children:"Bank Details"}),(0,n.jsxs)(i.A,{sx:{mb:2},children:[(0,n.jsxs)(c.A,{variant:"body2",color:"text.secondary",children:["Account: ",(null==(e=T.bankDetails)?void 0:e.accountNumber)||"Not provided"]}),(0,n.jsxs)(c.A,{variant:"body2",color:"text.secondary",children:["IFSC: ",(null==(t=T.bankDetails)?void 0:t.ifscCode)||"Not provided"]}),(0,n.jsxs)(c.A,{variant:"body2",color:"text.secondary",children:["Holder: ",(null==(s=T.bankDetails)?void 0:s.accountHolderName)||"Not provided"]})]}),(0,n.jsx)(d.A,{variant:"outlined",size:"small",children:"Update Bank Details"})]})})})]})]})]})}},47652:(e,t,s)=>{"use strict";s.d(t,{K:()=>a,Y:()=>l});var n=s(95155),r=s(12115),i=s(58147);let o=(0,r.createContext)(void 0),a=()=>{let e=(0,r.useContext)(o);if(!e)throw Error("useHost must be used within a HostProvider");return e},l=e=>{let{children:t}=e,[s,a]=(0,r.useState)(null),[l,c]=(0,r.useState)(!1),[d,h]=(0,r.useState)(!0);(0,r.useEffect)(()=>{let e=localStorage.getItem("hostSession");if(e)try{let t=JSON.parse(e);if(Date.now()-t.timestamp<864e5){let e={...t.host,memberSince:new Date(t.host.memberSince)};a(e),c(!0)}else localStorage.removeItem("hostSession")}catch(e){console.error("Invalid host session data"),localStorage.removeItem("hostSession")}h(!1)},[]);let x=async(e,t)=>{h(!0);try{let s=await i.u.login(e,t);if(!s.success||!s.host)return console.error("Login failed:",s.error),!1;{let[e,t]=await Promise.all([i.u.getHostProperties(s.host.id),i.u.getHostDashboardStats(s.host.id)]),n={...s.host,memberSince:new Date(s.host.memberSince),properties:e.map(e=>({...e,lastBooking:null})),totalProperties:t.totalProperties,totalRevenue:t.totalRevenue};return a(n),c(!0),localStorage.setItem("hostSession",JSON.stringify({host:n,timestamp:Date.now()})),!0}}catch(e){return console.error("Login failed:",e),!1}finally{h(!1)}},u=async e=>{try{let[t,n]=await Promise.all([i.u.getPropertyBookings(e),i.u.getHostRevenue(s.id,"month")]),r=null==s?void 0:s.properties.find(t=>t.id===e);if(!r)return null;return{totalBookings:r.totalBookings,totalRevenue:r.totalRevenue,averageRating:r.averageRating,occupancyRate:78,monthlyBookings:[12,15,18,22,25,28,30,32,29,26,23,20]}}catch(e){return console.error("Error fetching property stats:",e),null}},g=async(e,t)=>{try{let n=await i.u.updateProperty(e,t);if(n){let e=await i.u.getHostProperties(s.id),t=await i.u.getHostDashboardStats(s.id);a(s=>s?{...s,properties:e.map(e=>({...e,lastBooking:null})),totalProperties:t.totalProperties,totalRevenue:t.totalRevenue}:null)}return n}catch(e){return console.error("Property update failed:",e),!1}},m=async e=>{try{return await i.u.getPropertyBookings(e)}catch(e){return console.error("Error fetching bookings:",e),[]}},j=async(e,t)=>{try{let n=await i.u.getHostRevenue(s.id,t),r=null==s?void 0:s.properties.find(t=>t.id===e);if(!r)return null;return{period:t,totalRevenue:r.totalRevenue||0,totalBookings:r.totalBookings||0,averageBookingValue:(r.totalRevenue||0)/(r.totalBookings||1),revenueTrend:n.map(e=>e.amount),topRevenueMonths:["December","January","February"]}}catch(e){return console.error("Error fetching revenue analytics:",e),null}};return(0,n.jsx)(o.Provider,{value:{host:s,isAuthenticated:l,isLoading:d,login:x,logout:()=>{a(null),c(!1),localStorage.removeItem("hostSession")},getPropertyStats:u,updateProperty:g,getBookings:m,getRevenueAnalytics:j},children:t})}},58147:(e,t,s)=>{"use strict";s.d(t,{u:()=>r});class n{static getInstance(){return n.instance||(n.instance=new n),n.instance}async initialize(){return Promise.resolve()}async getAll(){return this.hosts}async getById(e){return this.hosts.find(t=>t.id===e)||null}async create(e){let t={...e,id:Date.now().toString(),created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return this.hosts.push(t),t}async update(e,t){let s=this.hosts.findIndex(t=>t.id===e);return -1!==s?(this.hosts[s]={...this.hosts[s],...t,updated_at:new Date().toISOString()},this.hosts[s]):null}async delete(e){let t=this.hosts.findIndex(t=>t.id===e);return -1!==t&&(this.hosts.splice(t,1),!0)}async getHostSelfBookings(e){return console.log("Getting host self bookings for:",e),[]}async login(e,t){let s=this.hosts.find(t=>t.email===e);return s?{success:!0,host:s}:{success:!1,error:"Invalid credentials"}}async getHostProperties(e){return[]}async getHostDashboardStats(e){return{totalProperties:0,totalRevenue:0}}async getPropertyBookings(e){return[]}async getHostRevenue(e,t){return[]}async updateProperty(e,t){return!0}constructor(){this.hosts=[]}}let r=n.getInstance()},96401:(e,t,s)=>{Promise.resolve().then(s.bind(s,44696))}},e=>{e.O(0,[5446,134,5493,5436,3077,7247,8548,8020,2403,9562,4211,835,872,422,3568,2686,537,8441,1255,7358],()=>e(e.s=96401)),_N_E=e.O()}]);