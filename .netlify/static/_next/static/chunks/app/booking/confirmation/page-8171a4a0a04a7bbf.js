(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4698],{7568:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>k});var i=r(95155),s=r(12115),a=r(97322),n=r(80851),o=r(23315),l=r(29767),c=r(84578),d=r(4474),u=r(78010),h=r(70690),g=r(36741),m=r(30285),p=r(26781),x=r(20063),A=r(62043);class y{static getInstance(){return y.instance||(y.instance=new y),y.instance}async initialize(){return Promise.resolve()}async getAll(){return this.triggers}async getById(e){return this.triggers.find(t=>t.id===e)||null}async create(e){let t={...e,id:Date.now().toString(),created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return this.triggers.push(t),t}async update(e,t){let r=this.triggers.findIndex(t=>t.id===e);return -1!==r?(this.triggers[r]={...this.triggers[r],...t,updated_at:new Date().toISOString()},this.triggers[r]):null}async delete(e){let t=this.triggers.findIndex(t=>t.id===e);return -1!==t&&(this.triggers.splice(t,1),!0)}async triggerBookingConfirmation(e){return console.log("Triggering booking confirmation email:",e),{success:!0,message:"Booking confirmation email sent"}}constructor(){this.triggers=[]}}let b=y.getInstance();var f=r(37325),v=r(39631);function j(){var e;let t=(0,x.useRouter)(),r=(0,x.useSearchParams)(),[y,j]=(0,s.useState)(null),[k,w]=(0,s.useState)(""),[I,C]=(0,s.useState)(null),[z,S]=(0,s.useState)(""),N={guestName:r.get("guestName")||"Guest",guestEmail:r.get("guestEmail")||"",bookingId:r.get("bookingId")||"LS-"+Date.now(),propertyName:r.get("propertyName")||"Luxury Villa",propertyAddress:r.get("propertyAddress")||"Premium Location",propertyLocation:r.get("propertyLocation")||"Premium Location",checkIn:r.get("checkIn")||new Date().toLocaleDateString(),checkOut:r.get("checkOut")||new Date(Date.now()+6048e5).toLocaleDateString(),guests:r.get("guests")||"2",totalAmount:parseFloat(r.get("totalAmount")||"0"),hostName:r.get("hostName")||"Property Host",hostPhone:r.get("hostPhone")||"+91-8828279739",hostEmail:r.get("hostEmail")||"host@luxestaycations.in",specialRequests:r.get("specialRequests")||"",amenities:(null==(e=r.get("amenities"))?void 0:e.split(","))||[],transactionId:r.get("transactionId")||"TXN-"+Date.now(),paymentMethod:r.get("paymentMethod")||"Online Payment"};(0,s.useEffect)(()=>{(async()=>{if(N.guestEmail)try{await A.gm.initialize(),A.gm.isConfigured?E():(console.log("Email service not configured, skipping email send"),j("error"),w("Email service not configured. Please configure email settings in admin panel."))}catch(e){console.error("Error initializing email service:",e),j("error"),w("Failed to initialize email service")}})();let e=r.get("guestPhone");e&&f.c.isConfigured&&P(e)},[]);let E=async()=>{if(N.guestEmail){j("sending");try{let e=await b.triggerBookingConfirmation(N);e.success?(j("sent"),w("Confirmation email sent successfully!")):(j("error"),w(e.message||"Email sending failed"))}catch(e){j("error"),w("Failed to send confirmation email")}}},P=async e=>{C("sending");try{await f.c.initialize();let t=await f.c.sendBookingConfirmation({guestName:N.guestName,guestPhone:e,bookingId:N.bookingId,propertyName:N.propertyName,checkIn:N.checkIn,checkOut:N.checkOut,totalAmount:N.totalAmount,confirmationCode:N.bookingId});t.success?(C("sent"),S("WhatsApp confirmation sent successfully!")):(C("error"),S(t.message||"WhatsApp sending failed"))}catch(e){console.error("Error sending WhatsApp confirmation:",e),C("error"),S("Failed to send WhatsApp confirmation")}};return(0,i.jsxs)(a.A,{maxWidth:"md",sx:{py:8},children:[(0,i.jsxs)(n.A,{sx:{textAlign:"center",mb:6},children:[(0,i.jsx)(g.A,{sx:{fontSize:80,color:"success.main",mb:3}}),(0,i.jsx)(o.A,{variant:"h3",sx:{mb:2,color:"var(--primary-dark)"},children:"Booking Confirmed!"}),(0,i.jsx)(o.A,{variant:"h6",sx:{color:"text.secondary",mb:4},children:"Thank you for choosing Luxe Staycations"})]}),y&&(0,i.jsx)(l.A,{sx:{mb:4},children:(0,i.jsxs)(c.A,{children:[(0,i.jsxs)(n.A,{sx:{display:"flex",alignItems:"center",gap:2,mb:2},children:[(0,i.jsx)(m.A,{color:"primary"}),(0,i.jsx)(o.A,{variant:"h6",children:"Email Confirmation"})]}),"sending"===y&&(0,i.jsxs)(n.A,{sx:{display:"flex",alignItems:"center",gap:2},children:[(0,i.jsx)(d.A,{size:20}),(0,i.jsx)(o.A,{variant:"body2",children:"Sending confirmation email..."})]}),"sent"===y&&(0,i.jsxs)(u.A,{severity:"success",sx:{mb:2},children:["✅ Confirmation email sent successfully to ",N.guestEmail]}),"error"===y&&(0,i.jsxs)(u.A,{severity:"warning",sx:{mb:2},children:["⚠️ ",k,(0,i.jsx)(h.A,{size:"small",onClick:E,sx:{ml:2},children:"Retry"})]})]})}),I&&(0,i.jsx)(l.A,{sx:{mb:4},children:(0,i.jsxs)(c.A,{children:[(0,i.jsxs)(n.A,{sx:{display:"flex",alignItems:"center",gap:2,mb:2},children:[(0,i.jsx)(p.A,{sx:{color:"#25D366"}}),(0,i.jsx)(o.A,{variant:"h6",children:"WhatsApp Confirmation"})]}),"sending"===I&&(0,i.jsxs)(n.A,{sx:{display:"flex",alignItems:"center",gap:2},children:[(0,i.jsx)(d.A,{size:20}),(0,i.jsx)(o.A,{variant:"body2",children:"Sending WhatsApp confirmation..."})]}),"sent"===I&&(0,i.jsx)(u.A,{severity:"success",sx:{mb:2},children:"✅ WhatsApp confirmation sent successfully!"}),"error"===I&&(0,i.jsxs)(u.A,{severity:"warning",sx:{mb:2},children:["⚠️ ",z]})]})}),(0,i.jsx)(l.A,{sx:{mb:4},children:(0,i.jsxs)(c.A,{children:[(0,i.jsx)(o.A,{variant:"h6",sx:{mb:3},children:"What's Next?"}),(0,i.jsxs)(o.A,{variant:"body1",sx:{mb:2},children:["• ","sent"===y?"Confirmation email sent to your inbox":"You will receive a confirmation email shortly"]}),(0,i.jsx)(o.A,{variant:"body1",sx:{mb:2},children:"• Our team will contact you to confirm your stay details"}),(0,i.jsx)(o.A,{variant:"body1",sx:{mb:2},children:"• You can manage your booking through the guest portal"}),(0,i.jsx)(o.A,{variant:"body1",children:"• For any questions, please contact our support team"})]})}),(0,i.jsxs)(n.A,{sx:{display:"flex",justifyContent:"center",gap:2},children:[(0,i.jsx)(h.A,{variant:"contained",onClick:()=>t.push("/villas"),sx:{bgcolor:"var(--primary-dark)","&:hover":{bgcolor:"var(--primary-dark)"}},children:"Browse More Properties"}),(0,i.jsx)(h.A,{variant:"outlined",onClick:()=>t.push("/"),children:"Return Home"})]}),(0,i.jsx)(v.A,{phoneNumber:N.hostPhone,message:"Hello! I have a booking confirmation for ".concat(N.propertyName,". Booking ID: ").concat(N.bookingId,". Please assist me with any questions."),variant:"floating",size:"large",position:{bottom:20,right:20}})]})}function k(){return(0,i.jsx)(s.Suspense,{fallback:(0,i.jsx)(a.A,{maxWidth:"md",sx:{py:4},children:(0,i.jsx)(n.A,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"400px",children:(0,i.jsx)(d.A,{})})}),children:(0,i.jsx)(j,{})})}},26781:(e,t,r)=>{"use strict";r.d(t,{A:()=>a}),r(12115);var i=r(15485),s=r(95155);let a=(0,i.A)((0,s.jsx)("path",{d:"M16.75 13.96c.25.13.41.2.46.3.06.11.04.61-.21 1.18-.2.56-1.24 1.1-1.7 1.12-.46.02-.47.36-2.96-.73-2.49-1.09-3.99-3.75-4.11-3.92-.12-.17-.96-1.38-.92-2.61.05-1.22.69-1.8.95-2.04.24-.26.51-.29.68-.26h.47c.15 0 .36-.06.55.45l.69 1.87c.06.13.1.28.01.44l-.27.41-.39.42c-.12.12-.26.25-.12.5.12.26.62 1.09 1.32 1.78.91.88 1.71 1.17 1.95 1.3.24.14.39.12.54-.04l.81-.94c.19-.25.35-.19.58-.11l1.67.88M12 2a10 10 0 0 1 10 10 10 10 0 0 1-10 10c-1.97 0-3.8-.57-5.35-1.55L2 22l1.55-4.65A9.969 9.969 0 0 1 2 12 10 10 0 0 1 12 2m0 2a8 8 0 0 0-8 8c0 1.72.54 3.31 1.46 4.61L4.5 19.5l2.89-.96A7.95 7.95 0 0 0 12 20a8 8 0 0 0 8-8 8 8 0 0 0-8-8z"}),"WhatsApp")},30285:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var i=r(15485),s=r(95155);let a=(0,i.A)((0,s.jsx)("path",{d:"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2m0 4-8 5-8-5V6l8 5 8-5z"}),"Email")},33567:(e,t,r)=>{"use strict";r.d(t,{A:()=>n}),r(12115);var i=r(58800),s=r(50361),a=r(46892);function n(){let e=(0,i.A)(s.A);return e[a.A]||e}},35205:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var i=r(15485),s=r(95155);let a=(0,i.A)((0,s.jsx)("path",{d:"M2.01 21 23 12 2.01 3 2 10l15 2-15 2z"}),"Send")},42205:(e,t,r)=>{Promise.resolve().then(r.bind(r,7568))},67895:(e,t,r)=>{"use strict";r.d(t,{A:()=>f});var i=r(67810),s=r(88945),a=r(12115),n=r(2821),o=r(57001),l=r(134),c=r(81852),d=r(16625),u=r(85795),h=r(95195);function g(e){return(0,h.Ay)("MuiFab",e)}let m=(0,u.A)("MuiFab",["root","primary","secondary","extended","circular","focusVisible","disabled","colorInherit","sizeSmall","sizeMedium","sizeLarge","info","error","warning","success"]);var p=r(48116),x=r(30424),A=r(95155);let y=["children","className","color","component","disabled","disableFocusRipple","focusVisibleClassName","size","variant"],b=(0,p.Ay)(l.A,{name:"MuiFab",slot:"Root",shouldForwardProp:e=>(0,x.A)(e)||"classes"===e,overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.root,t[r.variant],t["size".concat((0,c.A)(r.size))],"inherit"===r.color&&t.colorInherit,t[(0,c.A)(r.size)],t[r.color]]}})(e=>{var t,r;let{theme:i,ownerState:a}=e;return(0,s.A)({},i.typography.button,{minHeight:36,transition:i.transitions.create(["background-color","box-shadow","border-color"],{duration:i.transitions.duration.short}),borderRadius:"50%",padding:0,minWidth:0,width:56,height:56,zIndex:(i.vars||i).zIndex.fab,boxShadow:(i.vars||i).shadows[6],"&:active":{boxShadow:(i.vars||i).shadows[12]},color:i.vars?i.vars.palette.text.primary:null==(t=(r=i.palette).getContrastText)?void 0:t.call(r,i.palette.grey[300]),backgroundColor:(i.vars||i).palette.grey[300],"&:hover":{backgroundColor:(i.vars||i).palette.grey.A100,"@media (hover: none)":{backgroundColor:(i.vars||i).palette.grey[300]},textDecoration:"none"},["&.".concat(m.focusVisible)]:{boxShadow:(i.vars||i).shadows[6]}},"small"===a.size&&{width:40,height:40},"medium"===a.size&&{width:48,height:48},"extended"===a.variant&&{borderRadius:24,padding:"0 16px",width:"auto",minHeight:"auto",minWidth:48,height:48},"extended"===a.variant&&"small"===a.size&&{width:"auto",padding:"0 8px",borderRadius:17,minWidth:34,height:34},"extended"===a.variant&&"medium"===a.size&&{width:"auto",padding:"0 16px",borderRadius:20,minWidth:40,height:40},"inherit"===a.color&&{color:"inherit"})},e=>{let{theme:t,ownerState:r}=e;return(0,s.A)({},"inherit"!==r.color&&"default"!==r.color&&null!=(t.vars||t).palette[r.color]&&{color:(t.vars||t).palette[r.color].contrastText,backgroundColor:(t.vars||t).palette[r.color].main,"&:hover":{backgroundColor:(t.vars||t).palette[r.color].dark,"@media (hover: none)":{backgroundColor:(t.vars||t).palette[r.color].main}}})},e=>{let{theme:t}=e;return{["&.".concat(m.disabled)]:{color:(t.vars||t).palette.action.disabled,boxShadow:(t.vars||t).shadows[0],backgroundColor:(t.vars||t).palette.action.disabledBackground}}}),f=a.forwardRef(function(e,t){let r=(0,d.b)({props:e,name:"MuiFab"}),{children:a,className:l,color:u="default",component:h="button",disabled:m=!1,disableFocusRipple:p=!1,focusVisibleClassName:x,size:f="large",variant:v="circular"}=r,j=(0,i.A)(r,y),k=(0,s.A)({},r,{color:u,component:h,disabled:m,disableFocusRipple:p,size:f,variant:v}),w=(e=>{let{color:t,variant:r,classes:i,size:a}=e,n={root:["root",r,"size".concat((0,c.A)(a)),"inherit"===t?"colorInherit":t]},l=(0,o.A)(n,g,i);return(0,s.A)({},i,l)})(k);return(0,A.jsx)(b,(0,s.A)({className:(0,n.A)(w.root,l),component:h,disabled:m,focusRipple:!p,focusVisibleClassName:(0,n.A)(w.focusVisible,x),ownerState:k,ref:t},j,{classes:w,children:a}))})},77073:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var i=r(15485),s=r(95155);let a=(0,i.A)((0,s.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close")}},e=>{e.O(0,[5446,134,5493,5436,7247,8020,2403,9562,4211,872,422,2380,6721,8441,1255,7358],()=>e(e.s=42205)),_N_E=e.O()}]);