(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7],{26155:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>X});var s=t(95155),n=t(12115),i=t(97322),a=t(80851),o=t(23315),l=t(29767),c=t(84578),d=t(78010),x=t(9562),m=t(56422),u=t(41983),h=t(70690),j=t(4474),p=t(21067),y=t(65629),A=t(27414),g=t(51611),f=t(80412),b=t(68212),v=t(42063),w=t(20063);function _(e){let{onAuthSuccess:r}=e;(0,w.useRouter)();let[t,_]=(0,n.useState)(""),[k,C]=(0,n.useState)(""),[S,W]=(0,n.useState)(!1),[P,I]=(0,n.useState)(""),[D,E]=(0,n.useState)(!1),R=async()=>{I(""),E(!0);try{if(!t.trim()||!k.trim()){I("Please enter both Guest ID and Password"),E(!1);return}await new Promise(e=>setTimeout(e,1e3)),t.trim()&&k.trim()?(localStorage.setItem("loyaltyGuestId",t.trim()),localStorage.setItem("loyaltyGuestEmail","".concat(t.trim(),"@guest.com")),r(t.trim(),"".concat(t.trim(),"@guest.com"))):I("Invalid credentials. Please try again.")}catch(e){console.error("Login error:",e),I("An error occurred during login. Please try again.")}finally{E(!1)}},q=e=>{"Enter"===e.key&&R()};return(0,s.jsxs)(i.A,{maxWidth:"sm",sx:{py:4},children:[(0,s.jsxs)(a.A,{sx:{textAlign:"center",mb:4},children:[(0,s.jsx)(y.A,{sx:{fontSize:64,color:"#ffd700",mb:2}}),(0,s.jsx)(o.A,{variant:"h3",sx:{fontFamily:"Playfair Display, serif",fontWeight:700,color:"var(--primary-dark)",mb:2},children:"\uD83D\uDC8E Luxe Jewels Loyalty"}),(0,s.jsx)(o.A,{variant:"h6",sx:{color:"text.secondary"},children:"Access your personal jewel wallet and exclusive rewards"})]}),(0,s.jsx)(l.A,{sx:{border:"2px solid #f3f4f6",background:"linear-gradient(135deg, #ffffff 0%, #f8fafc 100%)"},children:(0,s.jsxs)(c.A,{sx:{p:4},children:[(0,s.jsxs)(o.A,{variant:"h5",sx:{mb:3,fontWeight:600,color:"var(--primary-dark)",textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center",gap:1},children:[(0,s.jsx)(A.A,{sx:{color:"var(--primary-light)"}}),"Guest Login"]}),P&&(0,s.jsx)(d.A,{severity:"error",sx:{mb:3},children:P}),(0,s.jsxs)(a.A,{sx:{mb:3},children:[(0,s.jsx)(x.A,{fullWidth:!0,label:"Guest ID",value:t,onChange:e=>_(e.target.value),placeholder:"Enter your Guest ID",onKeyPress:q,InputProps:{startAdornment:(0,s.jsx)(m.A,{position:"start",children:(0,s.jsx)(g.A,{sx:{color:"text.secondary"}})})},sx:{mb:2}}),(0,s.jsx)(x.A,{fullWidth:!0,label:"Password",value:k,onChange:e=>C(e.target.value),placeholder:"Enter your password",onKeyPress:q,type:S?"text":"password",InputProps:{startAdornment:(0,s.jsx)(m.A,{position:"start",children:(0,s.jsx)(f.A,{sx:{color:"text.secondary"}})}),endAdornment:(0,s.jsx)(m.A,{position:"end",children:(0,s.jsx)(u.A,{onClick:()=>W(!S),edge:"end",children:S?(0,s.jsx)(b.A,{}):(0,s.jsx)(v.A,{})})})}})]}),(0,s.jsx)(h.A,{fullWidth:!0,variant:"contained",onClick:R,disabled:D||!t.trim()||!k.trim(),sx:{py:2,mb:2,background:"linear-gradient(45deg, var(--primary-dark), var(--primary-light))","&:hover":{background:"linear-gradient(45deg, #4a332c, #b45309)"}},children:D?(0,s.jsx)(j.A,{size:24,sx:{color:"white"}}):"Access My Jewel Wallet"}),(0,s.jsx)(p.A,{sx:{my:3},children:(0,s.jsx)(o.A,{variant:"body2",sx:{color:"text.secondary"},children:"OR"})}),(0,s.jsx)(h.A,{fullWidth:!0,variant:"outlined",onClick:()=>{I("Guest registration feature coming soon. Please contact support for access.")},sx:{py:1.5,borderColor:"var(--primary-light)",color:"var(--primary-dark)","&:hover":{borderColor:"var(--primary-dark)",backgroundColor:"rgba(217, 119, 6, 0.04)"}},children:"New Guest? Register Here"})]})}),(0,s.jsx)(l.A,{sx:{mt:3,border:"2px solid #f3f4f6"},children:(0,s.jsxs)(c.A,{children:[(0,s.jsx)(o.A,{variant:"h6",sx:{mb:2,fontWeight:600,color:"var(--primary-dark)"},children:"How to Access Your Jewel Wallet"}),(0,s.jsx)(o.A,{variant:"body2",sx:{mb:2,color:"text.secondary"},children:"Your Guest ID and Password can be found in:"}),(0,s.jsxs)(a.A,{component:"ul",sx:{pl:2,mb:2},children:[(0,s.jsxs)(o.A,{component:"li",variant:"body2",sx:{color:"text.secondary",mb:1},children:[(0,s.jsx)("strong",{children:"Welcome Email:"})," Sent after your first booking"]}),(0,s.jsxs)(o.A,{component:"li",variant:"body2",sx:{color:"text.secondary",mb:1},children:[(0,s.jsx)("strong",{children:"Booking Confirmation:"})," Available in your booking details"]}),(0,s.jsxs)(o.A,{component:"li",variant:"body2",sx:{color:"text.secondary",mb:1},children:[(0,s.jsx)("strong",{children:"Guest Dashboard:"})," Accessible from your main guest account"]})]}),(0,s.jsxs)(o.A,{variant:"body2",sx:{color:"text.secondary"},children:[(0,s.jsx)("strong",{children:"Need Help?"})," Contact us at ",(0,s.jsx)("strong",{children:"loyalty@luxestaycations.com"})]})]})})]})}var k=t(28548),C=t(33077),S=t(52005),W=t(41602),P=t(92025),I=t(49501),D=t(17681),E=t(48833),R=t(52363),q=t(65036),G=t(52641),L=t(95436),T=t(88450),z=t(86973),F=t(75912),J=t(80422),N=t(74527),O=t(27055),Y=t(27531),B=t(16757),H=t(28121),V=t(62291),M=t(70902),K=t(75854);function Q(e){let{guestId:r,guestEmail:t,onLogout:m}=e,[u,j]=(0,n.useState)(null),[g,f]=(0,n.useState)(!1),[b,v]=(0,n.useState)({jewels_to_redeem:100,redemption_reason:"",contact_preference:"email",special_notes:""}),[w,_]=(0,n.useState)(!1),[Q,U]=(0,n.useState)({open:!1,message:"",severity:"success"}),X=(e,r)=>{v(t=>({...t,[e]:r}))};(0,n.useEffect)(()=>{Z()},[r]);let Z=()=>{j({guest_id:r,guest_email:t,active_balance:1250,total_earned:2e3,total_redeemed:750,pending_redemptions:0,tier:{current:"Gold",next:"Platinum",jewels_to_next:250,multiplier:1.5},transactions:[{id:"1",type:"earned",amount:500,description:"Booking at Villa Sunshine",date:"2024-01-15"},{id:"2",type:"redeemed",amount:300,description:"Discount on Villa Moonlight",date:"2024-01-10",status:"approved"},{id:"3",type:"earned",amount:750,description:"Booking at Villa Oceanview",date:"2024-01-05"},{id:"4",type:"pending",amount:200,description:"Redemption request for Villa Sunset",date:"2024-01-20",status:"pending"}]})},$=async()=>{if(b.jewels_to_redeem<100)return void U({open:!0,message:"Minimum redemption amount is 100 jewels",severity:"error"});if(b.jewels_to_redeem>((null==u?void 0:u.active_balance)||0))return void U({open:!0,message:"You don't have enough jewels for this redemption",severity:"error"});if(!b.redemption_reason.trim())return void U({open:!0,message:"Please provide a reason for redemption",severity:"error"});_(!0);try{let e=await fetch("/api/loyalty/redemption-requests",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({guest_id:r,jewels_to_redeem:b.jewels_to_redeem,redemption_reason:b.redemption_reason,contact_preference:b.contact_preference,special_notes:b.special_notes})}),t=await e.json();if(!e.ok)throw Error(t.error||"Failed to submit redemption request");U({open:!0,message:"Redemption request for ".concat(b.jewels_to_redeem," jewels submitted successfully! Admin approval required."),severity:"info"}),f(!1),v({jewels_to_redeem:100,redemption_reason:"",contact_preference:"email",special_notes:""}),Z()}catch(e){console.error("Redemption request error:",e),U({open:!0,message:e instanceof Error?e.message:"Failed to submit redemption request. Please try again.",severity:"error"})}finally{_(!1)}},ee=e=>{switch(e.toLowerCase()){case"bronze":return"#cd7f32";case"silver":return"#c0c0c0";case"gold":return"#ffd700";case"platinum":return"#e5e4e2";case"diamond":return"#b9f2ff";default:return"#6b7280"}};if(!u)return(0,s.jsx)(i.A,{maxWidth:"lg",sx:{py:4},children:(0,s.jsx)(o.A,{variant:"h6",sx:{textAlign:"center",color:"text.secondary"},children:"Loading your jewel wallet..."})});let er=(u.tier.jewels_to_next-u.tier.jewels_to_next)/u.tier.jewels_to_next*100;return(0,s.jsxs)(i.A,{maxWidth:"lg",sx:{py:4},children:[(0,s.jsxs)(a.A,{sx:{textAlign:"center",mb:4},children:[(0,s.jsxs)(o.A,{variant:"h3",sx:{fontFamily:"Playfair Display, serif",fontWeight:700,color:"var(--primary-dark)",mb:2},children:["\uD83D\uDC8E Welcome to Luxe Jewels, ",r,"!"]}),(0,s.jsx)(o.A,{variant:"h6",sx:{color:"text.secondary",mb:2},children:"Your personal jewel wallet and exclusive rewards"}),(0,s.jsxs)(a.A,{sx:{display:"flex",alignItems:"center",justifyContent:"center",gap:2,mb:2},children:[(0,s.jsx)(k.A,{icon:(0,s.jsx)(A.A,{}),label:"Guest ID: ".concat(r),color:"primary",variant:"outlined"}),(0,s.jsx)(k.A,{icon:(0,s.jsx)(A.A,{}),label:t,color:"secondary",variant:"outlined"})]}),(0,s.jsx)(h.A,{variant:"outlined",startIcon:(0,s.jsx)(H.A,{}),onClick:()=>m(),sx:{borderColor:"var(--primary-light)",color:"var(--primary-dark)","&:hover":{borderColor:"var(--primary-dark)",backgroundColor:"rgba(217, 119, 6, 0.04)"}},children:"Logout"})]}),(0,s.jsxs)(C.Ay,{container:!0,spacing:3,children:[(0,s.jsx)(C.Ay,{item:!0,xs:12,md:3,children:(0,s.jsx)(l.A,{sx:{background:"linear-gradient(135deg, #ffd700 0%, #ffed4e 100%)",color:"white"},children:(0,s.jsxs)(c.A,{sx:{textAlign:"center"},children:[(0,s.jsx)(y.A,{sx:{fontSize:40,mb:1}}),(0,s.jsx)(o.A,{variant:"h4",sx:{fontWeight:700},children:u.active_balance.toLocaleString()}),(0,s.jsx)(o.A,{variant:"body2",children:"Available Jewels"})]})})}),(0,s.jsx)(C.Ay,{item:!0,xs:12,md:3,children:(0,s.jsx)(l.A,{sx:{background:"linear-gradient(135deg, #10b981 0%, #34d399 100%)",color:"white"},children:(0,s.jsxs)(c.A,{sx:{textAlign:"center"},children:[(0,s.jsx)(N.A,{sx:{fontSize:40,mb:1}}),(0,s.jsx)(o.A,{variant:"h4",sx:{fontWeight:700},children:u.total_earned.toLocaleString()}),(0,s.jsx)(o.A,{variant:"body2",children:"Total Earned"})]})})}),(0,s.jsx)(C.Ay,{item:!0,xs:12,md:3,children:(0,s.jsx)(l.A,{sx:{background:"linear-gradient(135deg, #f59e0b 0%, #fbbf24 100%)",color:"white"},children:(0,s.jsxs)(c.A,{sx:{textAlign:"center"},children:[(0,s.jsx)(O.A,{sx:{fontSize:40,mb:1}}),(0,s.jsx)(o.A,{variant:"h4",sx:{fontWeight:700},children:u.total_redeemed.toLocaleString()}),(0,s.jsx)(o.A,{variant:"body2",children:"Total Redeemed"})]})})}),(0,s.jsx)(C.Ay,{item:!0,xs:12,md:3,children:(0,s.jsx)(l.A,{sx:{background:"linear-gradient(135deg, #8b5cf6 0%, #a78bfa 100%)",color:"white"},children:(0,s.jsxs)(c.A,{sx:{textAlign:"center"},children:[(0,s.jsx)(Y.A,{sx:{fontSize:40,mb:1}}),(0,s.jsx)(o.A,{variant:"h4",sx:{fontWeight:700},children:u.pending_redemptions}),(0,s.jsx)(o.A,{variant:"body2",children:"Pending Requests"})]})})}),(0,s.jsx)(C.Ay,{item:!0,xs:12,md:6,children:(0,s.jsx)(l.A,{children:(0,s.jsxs)(c.A,{children:[(0,s.jsxs)(o.A,{variant:"h5",sx:{fontFamily:"Playfair Display, serif",fontWeight:600,color:"var(--primary-dark)",mb:2},children:["Current Tier: ",u.tier.current]}),(0,s.jsx)(k.A,{label:u.tier.current,sx:{backgroundColor:ee(u.tier.current),color:"white",fontWeight:600,mb:2}}),u.tier.jewels_to_next>0&&(0,s.jsxs)(a.A,{sx:{mt:2},children:[(0,s.jsxs)(o.A,{variant:"body2",sx:{mb:1},children:[u.tier.jewels_to_next," more jewels needed to reach ",u.tier.next," tier"]}),(0,s.jsx)(S.A,{variant:"determinate",value:er,sx:{height:8,borderRadius:4,backgroundColor:"#e5e7eb","& .MuiLinearProgress-bar":{backgroundColor:ee(u.tier.next)}}})]}),(0,s.jsxs)(a.A,{sx:{mt:3},children:[(0,s.jsx)(o.A,{variant:"h6",sx:{mb:1},children:"Tier Benefits:"}),(0,s.jsxs)(W.A,{dense:!0,children:[(0,s.jsxs)(P.Ay,{children:[(0,s.jsx)(I.A,{children:(0,s.jsx)(V.A,{sx:{color:"var(--primary-light)"}})}),(0,s.jsx)(D.A,{primary:"".concat(u.tier.multiplier,"x Jewels earning rate")})]}),(0,s.jsxs)(P.Ay,{children:[(0,s.jsx)(I.A,{children:(0,s.jsx)(M.A,{sx:{color:"var(--primary-light)"}})}),(0,s.jsx)(D.A,{primary:"Priority customer support"})]}),(0,s.jsxs)(P.Ay,{children:[(0,s.jsx)(I.A,{children:(0,s.jsx)(K.A,{sx:{color:"var(--primary-light)"}})}),(0,s.jsx)(D.A,{primary:"Early access to new properties"})]})]})]})]})})}),(0,s.jsx)(C.Ay,{item:!0,xs:12,md:6,children:(0,s.jsx)(l.A,{children:(0,s.jsxs)(c.A,{children:[(0,s.jsx)(o.A,{variant:"h5",sx:{fontFamily:"Playfair Display, serif",fontWeight:600,color:"var(--primary-dark)",mb:2},children:"Quick Actions"}),(0,s.jsx)(h.A,{variant:"contained",fullWidth:!0,startIcon:(0,s.jsx)(Y.A,{}),onClick:()=>f(!0),disabled:u.active_balance<100,sx:{mb:2,background:"var(--primary-dark)","&:hover":{background:"var(--primary-light)"}},children:"Request Redemption"}),(0,s.jsx)(h.A,{variant:"outlined",fullWidth:!0,startIcon:(0,s.jsx)(B.A,{}),sx:{mb:2},children:"View Transaction History"}),(0,s.jsx)(h.A,{variant:"outlined",fullWidth:!0,startIcon:(0,s.jsx)(A.A,{}),children:"Update Profile"})]})})}),(0,s.jsx)(C.Ay,{item:!0,xs:12,children:(0,s.jsx)(l.A,{children:(0,s.jsxs)(c.A,{children:[(0,s.jsx)(o.A,{variant:"h5",sx:{fontFamily:"Playfair Display, serif",fontWeight:600,color:"var(--primary-dark)",mb:2},children:"Recent Transactions"}),u.transactions.length>0?(0,s.jsx)(W.A,{children:u.transactions.map((e,r)=>(0,s.jsxs)(n.Fragment,{children:[(0,s.jsxs)(P.Ay,{children:[(0,s.jsx)(I.A,{children:(e=>{switch(e){case"earned":return(0,s.jsx)(N.A,{sx:{color:"#10b981"}});case"redeemed":return(0,s.jsx)(O.A,{sx:{color:"#f59e0b"}});case"pending":return(0,s.jsx)(Y.A,{sx:{color:"#8b5cf6"}});default:return(0,s.jsx)(B.A,{sx:{color:"#6b7280"}})}})(e.type)}),(0,s.jsx)(D.A,{primary:e.description,secondary:new Date(e.date).toLocaleDateString()}),(0,s.jsxs)(a.A,{sx:{textAlign:"right"},children:[(0,s.jsxs)(o.A,{variant:"body1",sx:{fontWeight:600,color:(e=>{switch(e){case"earned":return"#10b981";case"redeemed":return"#f59e0b";case"pending":return"#8b5cf6";default:return"#6b7280"}})(e.type)},children:["earned"===e.type?"+":"-",e.amount," jewels"]}),e.status&&(0,s.jsx)(k.A,{label:e.status,size:"small",color:"approved"===e.status?"success":"pending"===e.status?"warning":"error",sx:{mt:.5}})]})]}),r<u.transactions.length-1&&(0,s.jsx)(p.A,{})]},e.id))}):(0,s.jsx)(o.A,{variant:"body2",sx:{color:"text.secondary",textAlign:"center"},children:"No transactions yet. Start earning jewels by completing your first stay!"})]})})})]}),(0,s.jsxs)(E.A,{open:g,onClose:()=>f(!1),maxWidth:"md",fullWidth:!0,children:[(0,s.jsxs)(R.A,{sx:{display:"flex",alignItems:"center",gap:1,fontFamily:"Playfair Display, serif",fontWeight:600},children:[(0,s.jsx)(Y.A,{sx:{color:"var(--primary-light)"}}),"Request Jewel Redemption"]}),(0,s.jsx)(q.A,{children:(0,s.jsxs)(a.A,{sx:{mb:3},children:[(0,s.jsx)(o.A,{variant:"body2",sx:{color:"text.secondary",mb:3},children:"Submit a redemption request for admin approval. Your jewels will be converted to discounts once approved."}),(0,s.jsxs)(C.Ay,{container:!0,spacing:3,children:[(0,s.jsx)(C.Ay,{item:!0,xs:12,md:6,children:(0,s.jsx)(x.A,{fullWidth:!0,label:"Jewels to Redeem",type:"number",value:b.jewels_to_redeem,onChange:e=>X("jewels_to_redeem",parseInt(e.target.value)||0),inputProps:{min:100,max:u.active_balance,step:10},helperText:"Available: ".concat(u.active_balance," jewels")})}),(0,s.jsx)(C.Ay,{item:!0,xs:12,md:6,children:(0,s.jsxs)(G.A,{fullWidth:!0,children:[(0,s.jsx)(L.A,{children:"Contact Preference"}),(0,s.jsxs)(T.A,{value:b.contact_preference,label:"Contact Preference",onChange:e=>{X("contact_preference",e.target.value)},children:[(0,s.jsx)(z.A,{value:"email",children:"Email"}),(0,s.jsx)(z.A,{value:"phone",children:"Phone"}),(0,s.jsx)(z.A,{value:"both",children:"Both"})]})]})}),(0,s.jsx)(C.Ay,{item:!0,xs:12,children:(0,s.jsx)(x.A,{fullWidth:!0,label:"Redemption Reason",multiline:!0,rows:3,value:b.redemption_reason,onChange:e=>X("redemption_reason",e.target.value),placeholder:"Please describe how you would like to use these jewels (e.g., discount on next booking, special offer, etc.)",required:!0})}),(0,s.jsx)(C.Ay,{item:!0,xs:12,children:(0,s.jsx)(x.A,{fullWidth:!0,label:"Special Notes (Optional)",multiline:!0,rows:2,value:b.special_notes,onChange:e=>X("special_notes",e.target.value),placeholder:"Any additional information or special requests..."})})]}),(0,s.jsx)(d.A,{severity:"info",sx:{mt:3},children:(0,s.jsxs)(o.A,{variant:"body2",children:[(0,s.jsx)("strong",{children:"Important:"})," Redemption requests require admin approval and may take 24-48 hours to process. You will be notified via your preferred contact method once the request is reviewed."]})})]})}),(0,s.jsxs)(F.A,{sx:{p:3},children:[(0,s.jsx)(h.A,{onClick:()=>f(!1),disabled:w,children:"Cancel"}),(0,s.jsx)(h.A,{variant:"contained",onClick:()=>$(),disabled:w||b.jewels_to_redeem<100||b.jewels_to_redeem>u.active_balance||!b.redemption_reason.trim(),startIcon:(0,s.jsx)(Y.A,{}),sx:{background:"var(--primary-dark)","&:hover":{background:"var(--primary-light)"}},children:w?"Submitting...":"Submit Redemption Request"})]})]}),(0,s.jsx)(J.A,{open:Q.open,autoHideDuration:6e3,onClose:()=>U({...Q,open:!1}),anchorOrigin:{vertical:"top",horizontal:"right"},children:(0,s.jsx)(d.A,{onClose:()=>U({...Q,open:!1}),severity:Q.severity,sx:{width:"100%"},children:Q.message})})]})}function U(){let[e,r]=(0,n.useState)(!1),[t,i]=(0,n.useState)(""),[a,o]=(0,n.useState)("");return((0,n.useEffect)(()=>{let e=localStorage.getItem("loyaltyGuestId"),t=localStorage.getItem("loyaltyGuestEmail");e&&t&&(i(e),o(t),r(!0))},[]),e)?(0,s.jsx)(Q,{guestId:t,guestEmail:a,onLogout:()=>{localStorage.removeItem("loyaltyGuestId"),localStorage.removeItem("loyaltyGuestEmail"),r(!1),i(""),o("")}}):(0,s.jsx)(_,{onAuthSuccess:(e,t)=>{i(e),o(t),r(!0)}})}function X(){return(0,s.jsx)(U,{})}},76386:(e,r,t)=>{Promise.resolve().then(t.bind(t,26155))}},e=>{e.O(0,[5446,134,5493,5436,3077,7247,8548,8020,2403,9562,4211,835,872,422,5910,3116,8441,1255,7358],()=>e(e.s=76386)),_N_E=e.O()}]);