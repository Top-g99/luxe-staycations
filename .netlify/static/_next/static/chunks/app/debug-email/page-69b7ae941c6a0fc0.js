(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6763],{31094:(e,t,n)=>{Promise.resolve().then(n.bind(n,34701))},34701:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>b});var a=n(95155),s=n(12115),r=n(97322),i=n(23315),o=n(29767),c=n(84578),l=n(70690),m=n(4474),u=n(80851),d=n(28548),g=n(78010),f=n(21067),h=n(33077),y=n(62043);class p{static getInstance(){return p.instance||(p.instance=new p),p.instance}async initialize(){return Promise.resolve()}async getAll(){return this.emails}async getById(e){return this.emails.find(t=>t.id===e)||null}async create(e){let t={...e,id:Date.now().toString(),created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return this.emails.push(t),t}async update(e,t){let n=this.emails.findIndex(t=>t.id===e);return -1!==n?(this.emails[n]={...this.emails[n],...t,updated_at:new Date().toISOString()},this.emails[n]):null}async delete(e){let t=this.emails.findIndex(t=>t.id===e);return -1!==t&&(this.emails.splice(t,1),!0)}getConfiguration(){return{smtp_host:"smtp.gmail.com",smtp_port:587,smtp_user:"test@example.com",smtp_pass:"test_password",from_email:"noreply@luxestaycations.in",from_name:"Luxe Staycations",is_active:!0}}async sendEmail(e,t,n){try{return await this.create({to:e,subject:t,content:n,status:"sent"}),console.log("Email sent:",{to:e,subject:t}),!0}catch(e){return console.error("Email sending failed:",e),!1}}async getTemplates(){return[]}async saveTemplate(e){return({id:Date.now().toString(),...e,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}).id}async updateTemplate(e,t){return console.log("Updating template:",e,t),!0}async deleteTemplate(e){return console.log("Deleting template:",e),!0}constructor(){this.emails=[]}}let x=p.getInstance();function b(){let[e,t]=(0,s.useState)(!1),[p,b]=(0,s.useState)([]),[S,v]=(0,s.useState)(null),j=(e,t,n,a)=>{b(s=>[...s,{test:e,status:t,message:n,details:a,timestamp:new Date().toLocaleTimeString()}])},w=async()=>{t(!0),b([]);try{j("Supabase Connection","info","Testing Supabase connection...");try{await x.initialize(),j("Supabase Connection","success","Supabase connection successful")}catch(e){j("Supabase Connection","error","Supabase connection failed: ".concat(e));return}j("Config Loading","info","Loading email configuration...");try{let e=x.getConfiguration();if(!e)return void j("Config Loading","error","No email configuration found in Supabase");v(e),j("Config Loading","success","Email configuration loaded from Supabase",{smtpHost:e.smtpHost,smtpPort:e.smtpPort,smtpUser:e.smtpUser,enableSSL:e.enableSSL,fromEmail:e.fromEmail,fromName:e.fromName})}catch(e){j("Config Loading","error","Failed to load configuration: ".concat(e));return}j("Email Service","info","Initializing email service...");try{await y.gm.initialize();let e=y.gm.getConfig();e?j("Email Service","success","Email service initialized successfully",{isConfigured:y.gm.isConfigured,config:e}):j("Email Service","error","Email service not properly configured")}catch(e){j("Email Service","error","Email service initialization failed: ".concat(e))}if(S){j("SMTP Test","info","Testing SMTP connection...");try{let e=await y.gm.testConnection();j("SMTP Test",e.success?"success":"error",e.message)}catch(e){j("SMTP Test","error","SMTP test failed: ".concat(e))}}j("Database Tables","info","Checking email configuration table...");try{let{getSupabaseClient:e,TABLES:t}=await n.e(2890).then(n.bind(n,62890)),a=e();if(a){let{data:e,error:n}=await a.from(t.EMAIL_CONFIGURATIONS).select("*").eq("is_active",!0);n?j("Database Tables","error","Database query failed: ".concat(n.message)):j("Database Tables","success","Found ".concat((null==e?void 0:e.length)||0," active email configurations"),e)}else j("Database Tables","error","Supabase client not available")}catch(e){j("Database Tables","error","Database check failed: ".concat(e))}}catch(e){j("General","error","Diagnostic failed: ".concat(e))}finally{t(!1)}};return(0,a.jsxs)(r.A,{maxWidth:"lg",sx:{py:4},children:[(0,a.jsx)(i.A,{variant:"h4",sx:{mb:4,fontWeight:600,color:"#5a3d35"},children:"Email Configuration Diagnostics"}),(0,a.jsx)(o.A,{sx:{mb:3},children:(0,a.jsxs)(c.A,{children:[(0,a.jsx)(i.A,{variant:"h6",sx:{mb:2},children:"Run Email System Diagnostics"}),(0,a.jsx)(i.A,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"This diagnostic tool will test all components of the email system to identify issues."}),(0,a.jsx)(l.A,{variant:"contained",onClick:w,disabled:e,startIcon:e?(0,a.jsx)(m.A,{size:20}):null,sx:{background:"linear-gradient(45deg, #5a3d35, #d97706)","&:hover":{background:"linear-gradient(45deg, #4a332c, #b45309)"}},children:e?"Running Diagnostics...":"Run Diagnostics"})]})}),p.length>0&&(0,a.jsx)(o.A,{children:(0,a.jsxs)(c.A,{children:[(0,a.jsx)(i.A,{variant:"h6",sx:{mb:3},children:"Diagnostic Results"}),p.map((e,t)=>(0,a.jsxs)(u.A,{sx:{mb:2},children:[(0,a.jsxs)(u.A,{sx:{display:"flex",alignItems:"center",mb:1},children:[(0,a.jsx)(i.A,{variant:"body2",sx:{mr:1},children:(e=>{switch(e){case"success":return"✅";case"error":return"❌";case"info":return"ℹ️";default:return"\uD83D\uDD0D"}})(e.status)}),(0,a.jsx)(i.A,{variant:"subtitle2",sx:{mr:2,fontWeight:600},children:e.test}),(0,a.jsx)(d.A,{label:e.status.toUpperCase(),color:(e=>{switch(e){case"success":return"success";case"error":return"error";case"info":return"info";default:return"default"}})(e.status),size:"small"}),(0,a.jsx)(i.A,{variant:"caption",sx:{ml:"auto",color:"text.secondary"},children:e.timestamp})]}),(0,a.jsx)(g.A,{severity:"success"===e.status?"success":"error"===e.status?"error":"info",sx:{mb:1},children:e.message}),e.details&&(0,a.jsxs)(u.A,{sx:{ml:2,mb:2},children:[(0,a.jsx)(i.A,{variant:"caption",color:"text.secondary",children:"Details:"}),(0,a.jsx)("pre",{style:{background:"#f5f5f5",padding:"8px",borderRadius:"4px",fontSize:"12px",overflow:"auto",maxHeight:"200px"},children:JSON.stringify(e.details,null,2)})]}),t<p.length-1&&(0,a.jsx)(f.A,{sx:{my:2}})]},t))]})}),S&&(0,a.jsx)(o.A,{sx:{mt:3},children:(0,a.jsxs)(c.A,{children:[(0,a.jsx)(i.A,{variant:"h6",sx:{mb:2},children:"Current Email Configuration"}),(0,a.jsxs)(h.Ay,{container:!0,spacing:2,children:[(0,a.jsxs)(h.Ay,{item:!0,xs:12,md:6,children:[(0,a.jsx)(i.A,{variant:"body2",color:"text.secondary",children:"SMTP Host"}),(0,a.jsx)(i.A,{variant:"body1",children:S.smtpHost})]}),(0,a.jsxs)(h.Ay,{item:!0,xs:12,md:6,children:[(0,a.jsx)(i.A,{variant:"body2",color:"text.secondary",children:"SMTP Port"}),(0,a.jsx)(i.A,{variant:"body1",children:S.smtpPort})]}),(0,a.jsxs)(h.Ay,{item:!0,xs:12,md:6,children:[(0,a.jsx)(i.A,{variant:"body2",color:"text.secondary",children:"SMTP User"}),(0,a.jsx)(i.A,{variant:"body1",children:S.smtpUser})]}),(0,a.jsxs)(h.Ay,{item:!0,xs:12,md:6,children:[(0,a.jsx)(i.A,{variant:"body2",color:"text.secondary",children:"SSL/TLS"}),(0,a.jsx)(i.A,{variant:"body1",children:S.enableSSL?"Enabled":"Disabled"})]}),(0,a.jsxs)(h.Ay,{item:!0,xs:12,md:6,children:[(0,a.jsx)(i.A,{variant:"body2",color:"text.secondary",children:"From Email"}),(0,a.jsx)(i.A,{variant:"body1",children:S.fromEmail})]}),(0,a.jsxs)(h.Ay,{item:!0,xs:12,md:6,children:[(0,a.jsx)(i.A,{variant:"body2",color:"text.secondary",children:"From Name"}),(0,a.jsx)(i.A,{variant:"body1",children:S.fromName})]})]})]})})]})}},62043:(e,t,n)=>{"use strict";n.d(t,{gm:()=>s});class a{static getInstance(){return a.instance||(a.instance=new a),a.instance}async initialize(){return Promise.resolve()}async sendEmail(e){try{return console.log("Sending email:",e),!0}catch(e){return console.error("Email sending failed:",e),!1}}async getTemplates(){return this.templates}async getTemplate(e){return this.templates.find(t=>t.id===e)||null}async createTemplate(e){let t={...e,id:Date.now().toString(),created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return this.templates.push(t),t}async updateTemplate(e,t){let n=this.templates.findIndex(t=>t.id===e);return -1!==n?(this.templates[n]={...this.templates[n],...t,updated_at:new Date().toISOString()},this.templates[n]):null}async deleteTemplate(e){let t=this.templates.findIndex(t=>t.id===e);return -1!==t&&(this.templates.splice(t,1),!0)}getConfig(){return{smtpHost:"smtp.gmail.com",smtpPort:587,smtpSecure:!1,enableSSL:!1,smtpUser:"test@example.com",smtpPassword:"password",fromEmail:"noreply@luxestaycations.com",fromName:"Luxe Staycations",replyTo:"info@luxestaycations.com",testMode:!0,maxRetries:3,retryDelay:1e3}}async configure(e){return console.log("Configuring email service:",e),this.isConfigured=!0,!0}async reloadConfiguration(){console.log("Reloading email configuration")}async sendTestEmail(e){try{return{success:await this.sendEmail({to:e,subject:"Test Email - Luxe Staycations",content:"This is a test email from Luxe Staycations email service.",html:"<p>This is a test email from <strong>Luxe Staycations</strong> email service.</p>"})}}catch(e){return{success:!1,error:e instanceof Error?e.message:"Unknown error"}}}async sendBookingConfirmation(e){try{let t="Dear ".concat(e.guestName,", your booking ").concat(e.bookingId," for ").concat(e.propertyName," is confirmed. Check-in: ").concat(e.checkIn,", Check-out: ").concat(e.checkOut);return{success:await this.sendEmail({to:e.guestEmail,subject:"Booking Confirmation - Luxe Staycations",content:t,template:"booking-confirmation"})}}catch(e){return console.error("Booking confirmation email failed:",e),{success:!1,error:e instanceof Error?e.message:"Unknown error"}}}async testConnection(){return console.log("Testing email connection..."),{success:!0,message:"Email connection test successful"}}async sendBookingCancellation(e){try{let t="Dear ".concat(e.guestName,", your booking ").concat(e.bookingId," has been cancelled. Refund will be processed within 5-7 business days.");return{success:await this.sendEmail({to:e.guestEmail,subject:"Booking Cancellation - Luxe Staycations",content:t,template:"booking-cancellation"})}}catch(e){return console.error("Booking cancellation email failed:",e),{success:!1,error:e instanceof Error?e.message:"Unknown error"}}}async sendConsultationConfirmation(e){try{let t="Hi ".concat(e.name,", we have received your consultation request. Request ID: ").concat(e.requestId);return{success:await this.sendEmail({to:e.email,subject:"Consultation Request Confirmation - Luxe Staycations",content:t,template:"consultation-confirmation"})}}catch(e){return console.error("Consultation confirmation email failed:",e),{success:!1,error:e instanceof Error?e.message:"Unknown error"}}}async sendSpecialRequestConfirmation(e){try{let t="Hi ".concat(e.guestName,", we have received your special request for ").concat(e.propertyName,". Request ID: ").concat(e.requestId);return{success:await this.sendEmail({to:e.email,subject:"Special Request Confirmation - Luxe Staycations",content:t,template:"special-request-confirmation"})}}catch(e){return console.error("Special request confirmation email failed:",e),{success:!1,error:e instanceof Error?e.message:"Unknown error"}}}async sendContactFormThankYou(e){try{let t="Hi ".concat(e.name,", thank you for contacting us. We will get back to you soon.");return{success:await this.sendEmail({to:e.email,subject:"Thank You for Contacting Us - Luxe Staycations",content:t,template:"contact-thank-you"})}}catch(e){return console.error("Contact form thank you email failed:",e),{success:!1,error:e instanceof Error?e.message:"Unknown error"}}}async sendPartnerRequestConfirmation(e){try{let t="Hi ".concat(e.contactName,", we have received your partner request for ").concat(e.businessName,". Request ID: ").concat(e.requestId);return{success:await this.sendEmail({to:e.email,subject:"Partner Request Confirmation - Luxe Staycations",content:t,template:"partner-request-confirmation"})}}catch(e){return console.error("Partner request confirmation email failed:",e),{success:!1,error:e instanceof Error?e.message:"Unknown error"}}}async sendAdminNotification(e,t,n){try{let a="Admin notification: ".concat(e,". Data: ").concat(JSON.stringify(t));return{success:await this.sendEmail({to:n,subject:"Admin Notification - ".concat(e," - Luxe Staycations"),content:a,template:"admin-notification"})}}catch(e){return console.error("Admin notification email failed:",e),{success:!1,error:e instanceof Error?e.message:"Unknown error"}}}constructor(){this.templates=[],this.isConfigured=!1}}let s=a.getInstance()}},e=>{e.O(0,[5446,134,5493,5436,3077,7247,8548,7875,8441,1255,7358],()=>e(e.s=31094)),_N_E=e.O()}]);